{"ast":null,"code":"import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport { cloneElement, Component, useCallback, useReducer, useState, useEffect, useRef } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (node === null) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n      selectedItem = _ref2.selectedItem,\n      resultCount = _ref2.resultCount,\n      previousResultCount = _ref2.previousResultCount,\n      itemToString = _ref2.itemToString;\n\n  if (!isOpen) {\n    return selectedItem ? itemToString(selectedItem) : '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount) {\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = itemsLastIndex;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = 0;\n  }\n\n  return newIndex;\n}\n\nvar cleanupStatus = debounce(function () {\n  getStatusDiv().textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n\n  if (!status) {\n    return;\n  }\n\n  div.textContent = status;\n  cleanupStatus();\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar Downshift = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Downshift, _Component);\n\n  function Downshift(_props) {\n    var _this = _Component.call(this, _props) || this;\n\n    _this.id = _this.props.id || \"downshift-\" + generateId();\n    _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n    _this.labelId = _this.props.labelId || _this.id + \"-label\";\n    _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n    _this.getItemId = _this.props.getItemId || function (index) {\n      return _this.id + \"-item-\" + index;\n    };\n\n    _this.input = null;\n    _this.items = [];\n    _this.itemCount = null;\n    _this.previousResultCount = 0;\n    _this.timeoutIds = [];\n\n    _this.internalSetTimeout = function (fn, time) {\n      var id = setTimeout(function () {\n        _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n          return i !== id;\n        });\n        fn();\n      }, time);\n\n      _this.timeoutIds.push(id);\n    };\n\n    _this.setItemCount = function (count) {\n      _this.itemCount = count;\n    };\n\n    _this.unsetItemCount = function () {\n      _this.itemCount = null;\n    };\n\n    _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n      if (highlightedIndex === void 0) {\n        highlightedIndex = _this.props.defaultHighlightedIndex;\n      }\n\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(_extends({\n        highlightedIndex: highlightedIndex\n      }, otherStateToSet));\n    };\n\n    _this.clearSelection = function (cb) {\n      _this.internalSetState({\n        selectedItem: null,\n        inputValue: '',\n        highlightedIndex: _this.props.defaultHighlightedIndex,\n        isOpen: _this.props.defaultIsOpen\n      }, cb);\n    };\n\n    _this.selectItem = function (item, otherStateToSet, cb) {\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(_extends({\n        isOpen: _this.props.defaultIsOpen,\n        highlightedIndex: _this.props.defaultHighlightedIndex,\n        selectedItem: item,\n        inputValue: _this.props.itemToString(item)\n      }, otherStateToSet), cb);\n    };\n\n    _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n      var item = _this.items[itemIndex];\n\n      if (item == null) {\n        return;\n      }\n\n      _this.selectItem(item, otherStateToSet, cb);\n    };\n\n    _this.selectHighlightedItem = function (otherStateToSet, cb) {\n      return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n    };\n\n    _this.internalSetState = function (stateToSet, cb) {\n      var isItemSelected, onChangeArg;\n      var onStateChangeArg = {};\n      var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n      // so someone controlling the `inputValue` state gets notified of\n      // the input change as soon as possible. This avoids issues with\n      // preserving the cursor position.\n      // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n      if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n        _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), {}, stateToSet));\n      }\n\n      return _this.setState(function (state) {\n        state = _this.getState(state);\n        var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n        newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n        // what was selected before\n        // used to determine if onSelect and onChange callbacks should be called\n\n        isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n        var nextState = {}; // this is just used to tell whether the state changed\n\n        var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n        // and we're trying to update that state. OR if the selection has changed and we're\n        // trying to update the selection\n\n        if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n          onChangeArg = newStateToSet.selectedItem;\n        }\n\n        newStateToSet.type = newStateToSet.type || unknown;\n        Object.keys(newStateToSet).forEach(function (key) {\n          // onStateChangeArg should only have the state that is\n          // actually changing\n          if (state[key] !== newStateToSet[key]) {\n            onStateChangeArg[key] = newStateToSet[key];\n          } // the type is useful for the onStateChangeArg\n          // but we don't actually want to set it in internal state.\n          // this is an undocumented feature for now... Not all internalSetState\n          // calls support it and I'm not certain we want them to yet.\n          // But it enables users controlling the isOpen state to know when\n          // the isOpen state changes due to mouseup events which is quite handy.\n\n\n          if (key === 'type') {\n            return;\n          }\n\n          nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n          if (!_this.isControlledProp(key)) {\n            nextState[key] = newStateToSet[key];\n          }\n        }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n        // earlier, so we'll call it now that we know what the inputValue state will be.\n\n        if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), {}, newStateToSet));\n        }\n\n        return nextState;\n      }, function () {\n        // call the provided callback if it's a function\n        cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n        // we have relevant information to pass them.\n\n        var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n        if (hasMoreStateThanType) {\n          _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n        }\n\n        if (isItemSelected) {\n          _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n        }\n\n        if (onChangeArg !== undefined) {\n          _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n        } // this is currently undocumented and therefore subject to change\n        // We'll try to not break it, but just be warned.\n\n\n        _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n      });\n    };\n\n    _this.rootRef = function (node) {\n      return _this._rootNode = node;\n    };\n\n    _this.getRootProps = function (_temp, _temp2) {\n      var _extends2;\n\n      var _ref = _temp === void 0 ? {} : _temp,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          ref = _ref.ref,\n          rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\", \"ref\"]);\n\n      var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          _ref2$suppressRefErro = _ref2.suppressRefError,\n          suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro; // this is used in the render to know whether the user has called getRootProps.\n      // It uses that to know whether to apply the props automatically\n\n\n      _this.getRootProps.called = true;\n      _this.getRootProps.refKey = refKey;\n      _this.getRootProps.suppressRefError = suppressRefError;\n\n      var _this$getState = _this.getState(),\n          isOpen = _this$getState.isOpen;\n\n      return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n    };\n\n    _this.keyDownHandlers = {\n      ArrowDown: function ArrowDown(event) {\n        var _this2 = this;\n\n        event.preventDefault();\n\n        if (this.getState().isOpen) {\n          var amount = event.shiftKey ? 5 : 1;\n          this.moveHighlightedIndex(amount, {\n            type: keyDownArrowDown\n          });\n        } else {\n          this.internalSetState({\n            isOpen: true,\n            type: keyDownArrowDown\n          }, function () {\n            var itemCount = _this2.getItemCount();\n\n            if (itemCount > 0) {\n              _this2.setHighlightedIndex(getNextWrappingIndex(1, _this2.getState().highlightedIndex, itemCount), {\n                type: keyDownArrowDown\n              });\n            }\n          });\n        }\n      },\n      ArrowUp: function ArrowUp(event) {\n        var _this3 = this;\n\n        event.preventDefault();\n\n        if (this.getState().isOpen) {\n          var amount = event.shiftKey ? -5 : -1;\n          this.moveHighlightedIndex(amount, {\n            type: keyDownArrowUp\n          });\n        } else {\n          this.internalSetState({\n            isOpen: true,\n            type: keyDownArrowUp\n          }, function () {\n            var itemCount = _this3.getItemCount();\n\n            if (itemCount > 0) {\n              _this3.setHighlightedIndex(getNextWrappingIndex(-1, _this3.getState().highlightedIndex, itemCount), {\n                type: keyDownArrowDown\n              });\n            }\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var _this$getState2 = this.getState(),\n            isOpen = _this$getState2.isOpen,\n            highlightedIndex = _this$getState2.highlightedIndex;\n\n        if (isOpen && highlightedIndex != null) {\n          event.preventDefault();\n          var item = this.items[highlightedIndex];\n          var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n          if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n            return;\n          }\n\n          this.selectHighlightedItem({\n            type: keyDownEnter\n          });\n        }\n      },\n      Escape: function Escape(event) {\n        event.preventDefault();\n        this.reset({\n          type: keyDownEscape,\n          selectedItem: null,\n          inputValue: ''\n        });\n      }\n    };\n    _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n      ' ': function _(event) {\n        event.preventDefault();\n        this.toggleMenu({\n          type: keyDownSpaceButton\n        });\n      }\n    });\n    _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n      Home: function Home(event) {\n        this.highlightFirstOrLastIndex(event, true, {\n          type: keyDownHome\n        });\n      },\n      End: function End(event) {\n        this.highlightFirstOrLastIndex(event, false, {\n          type: keyDownEnd\n        });\n      }\n    });\n\n    _this.getToggleButtonProps = function (_temp3) {\n      var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          onClick = _ref3.onClick,\n          onPress = _ref3.onPress,\n          onKeyDown = _ref3.onKeyDown,\n          onKeyUp = _ref3.onKeyUp,\n          onBlur = _ref3.onBlur,\n          rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n      var _this$getState3 = _this.getState(),\n          isOpen = _this$getState3.isOpen;\n\n      var enabledEventHandlers = {\n        onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n        onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n        onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n        onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n      };\n      var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n      return _extends({\n        type: 'button',\n        role: 'button',\n        'aria-label': isOpen ? 'close menu' : 'open menu',\n        'aria-haspopup': true,\n        'data-toggle': true\n      }, eventHandlers, {}, rest);\n    };\n\n    _this.buttonHandleKeyUp = function (event) {\n      // Prevent click event from emitting in Firefox\n      event.preventDefault();\n    };\n\n    _this.buttonHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (_this.buttonKeyDownHandlers[key]) {\n        _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n      }\n    };\n\n    _this.buttonHandleClick = function (event) {\n      event.preventDefault(); // handle odd case for Safari and Firefox which\n      // don't give the button the focus properly.\n\n      /* istanbul ignore if (can't reasonably test this) */\n\n      if (_this.props.environment.document.activeElement === _this.props.environment.document.body) {\n        event.target.focus();\n      } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n      // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n      // when building for production and should therefore have no impact on production code.\n\n\n      if (process.env.NODE_ENV === 'test') {\n        _this.toggleMenu({\n          type: clickButton\n        });\n      } else {\n        // Ensure that toggle of menu occurs after the potential blur event in iOS\n        _this.internalSetTimeout(function () {\n          return _this.toggleMenu({\n            type: clickButton\n          });\n        });\n      }\n    };\n\n    _this.buttonHandleBlur = function (event) {\n      var blurTarget = event.target; // Save blur target for comparison with activeElement later\n      // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n      _this.internalSetTimeout(function () {\n        if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n        ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n      });\n    };\n\n    _this.getLabelProps = function (props) {\n      return _extends({\n        htmlFor: _this.inputId,\n        id: _this.labelId\n      }, props);\n    };\n\n    _this.getInputProps = function (_temp4) {\n      var _ref4 = _temp4 === void 0 ? {} : _temp4,\n          onKeyDown = _ref4.onKeyDown,\n          onBlur = _ref4.onBlur,\n          onChange = _ref4.onChange,\n          onInput = _ref4.onInput,\n          onChangeText = _ref4.onChangeText,\n          rest = _objectWithoutPropertiesLoose(_ref4, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n      var onChangeKey;\n      var eventHandlers = {};\n      /* istanbul ignore next (preact) */\n\n      onChangeKey = 'onChange';\n\n      var _this$getState4 = _this.getState(),\n          inputValue = _this$getState4.inputValue,\n          isOpen = _this$getState4.isOpen,\n          highlightedIndex = _this$getState4.highlightedIndex;\n\n      if (!rest.disabled) {\n        var _eventHandlers;\n\n        eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      return _extends({\n        'aria-autocomplete': 'list',\n        'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n        'aria-controls': isOpen ? _this.menuId : null,\n        'aria-labelledby': _this.labelId,\n        // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n        // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n        autoComplete: 'off',\n        value: inputValue,\n        id: _this.inputId\n      }, eventHandlers, {}, rest);\n    };\n\n    _this.inputHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && _this.inputKeyDownHandlers[key]) {\n        _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n      }\n    };\n\n    _this.inputHandleChange = function (event) {\n      _this.internalSetState({\n        type: changeInput,\n        isOpen: true,\n        inputValue: event.target.value,\n        highlightedIndex: _this.props.defaultHighlightedIndex\n      });\n    };\n\n    _this.inputHandleBlur = function () {\n      // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n      _this.internalSetTimeout(function () {\n        var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n        if (!_this.isMouseDown && !downshiftButtonIsActive) {\n          _this.reset({\n            type: blurInput\n          });\n        }\n      });\n    };\n\n    _this.menuRef = function (node) {\n      _this._menuNode = node;\n    };\n\n    _this.getMenuProps = function (_temp5, _temp6) {\n      var _extends3;\n\n      var _ref5 = _temp5 === void 0 ? {} : _temp5,\n          _ref5$refKey = _ref5.refKey,\n          refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n          ref = _ref5.ref,\n          props = _objectWithoutPropertiesLoose(_ref5, [\"refKey\", \"ref\"]);\n\n      var _ref6 = _temp6 === void 0 ? {} : _temp6,\n          _ref6$suppressRefErro = _ref6.suppressRefError,\n          suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n\n      _this.getMenuProps.called = true;\n      _this.getMenuProps.refKey = refKey;\n      _this.getMenuProps.suppressRefError = suppressRefError;\n      return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n    };\n\n    _this.getItemProps = function (_temp7) {\n      var _enabledEventHandlers;\n\n      var _ref7 = _temp7 === void 0 ? {} : _temp7,\n          onMouseMove = _ref7.onMouseMove,\n          onMouseDown = _ref7.onMouseDown,\n          onClick = _ref7.onClick,\n          onPress = _ref7.onPress,\n          index = _ref7.index,\n          _ref7$item = _ref7.item,\n          item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ?\n      /* istanbul ignore next */\n      undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n          rest = _objectWithoutPropertiesLoose(_ref7, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n      if (index === undefined) {\n        _this.items.push(item);\n\n        index = _this.items.indexOf(item);\n      } else {\n        _this.items[index] = item;\n      }\n\n      var onSelectKey = 'onClick';\n      var customClickHandler = onClick;\n      var enabledEventHandlers = (_enabledEventHandlers = {\n        // onMouseMove is used over onMouseEnter here. onMouseMove\n        // is only triggered on actual mouse movement while onMouseEnter\n        // can fire on DOM changes, interrupting keyboard navigation\n        onMouseMove: callAllEventHandlers(onMouseMove, function () {\n          if (index === _this.getState().highlightedIndex) {\n            return;\n          }\n\n          _this.setHighlightedIndex(index, {\n            type: itemMouseEnter\n          }); // We never want to manually scroll when changing state based\n          // on `onMouseMove` because we will be moving the element out\n          // from under the user which is currently scrolling/moving the\n          // cursor\n\n\n          _this.avoidScrolling = true;\n\n          _this.internalSetTimeout(function () {\n            return _this.avoidScrolling = false;\n          }, 250);\n        }),\n        onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n          // This prevents the activeElement from being changed\n          // to the item so it can remain with the current activeElement\n          // which is a more common use case.\n          event.preventDefault();\n        })\n      }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n        _this.selectItemAtIndex(index, {\n          type: clickItem\n        });\n      }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n      // of the activeElement if clicking on disabled items\n\n      var eventHandlers = rest.disabled ? {\n        onMouseDown: enabledEventHandlers.onMouseDown\n      } : enabledEventHandlers;\n      return _extends({\n        id: _this.getItemId(index),\n        role: 'option',\n        'aria-selected': _this.getState().highlightedIndex === index\n      }, eventHandlers, {}, rest);\n    };\n\n    _this.clearItems = function () {\n      _this.items = [];\n    };\n\n    _this.reset = function (otherStateToSet, cb) {\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(function (_ref8) {\n        var selectedItem = _ref8.selectedItem;\n        return _extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          inputValue: _this.props.itemToString(selectedItem)\n        }, otherStateToSet);\n      }, cb);\n    };\n\n    _this.toggleMenu = function (otherStateToSet, cb) {\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(function (_ref9) {\n        var isOpen = _ref9.isOpen;\n        return _extends({\n          isOpen: !isOpen\n        }, isOpen && {\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        }, {}, otherStateToSet);\n      }, function () {\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen,\n            highlightedIndex = _this$getState5.highlightedIndex;\n\n        if (isOpen) {\n          if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n            _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n          }\n        }\n\n        cbToCb(cb)();\n      });\n    };\n\n    _this.openMenu = function (cb) {\n      _this.internalSetState({\n        isOpen: true\n      }, cb);\n    };\n\n    _this.closeMenu = function (cb) {\n      _this.internalSetState({\n        isOpen: false\n      }, cb);\n    };\n\n    _this.updateStatus = debounce(function () {\n      var state = _this.getState();\n\n      var item = _this.items[state.highlightedIndex];\n\n      var resultCount = _this.getItemCount();\n\n      var status = _this.props.getA11yStatusMessage(_extends({\n        itemToString: _this.props.itemToString,\n        previousResultCount: _this.previousResultCount,\n        resultCount: resultCount,\n        highlightedItem: item\n      }, state));\n\n      _this.previousResultCount = resultCount;\n      setStatus(status, _this.props.environment.document);\n    }, 200); // fancy destructuring + defaults + aliases\n    // this basically says each value of state should either be set to\n    // the initial value or the default value if the initial value is not provided\n\n    var _this$props = _this.props,\n        defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n        _this$props$initialHi = _this$props.initialHighlightedIndex,\n        _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n        defaultIsOpen = _this$props.defaultIsOpen,\n        _this$props$initialIs = _this$props.initialIsOpen,\n        _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n        _this$props$initialIn = _this$props.initialInputValue,\n        _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n        _this$props$initialSe = _this$props.initialSelectedItem,\n        _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n    var _state = _this.getState({\n      highlightedIndex: _highlightedIndex,\n      isOpen: _isOpen,\n      inputValue: _inputValue,\n      selectedItem: _selectedItem\n    });\n\n    if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n      _state.inputValue = _this.props.itemToString(_state.selectedItem);\n    }\n\n    _this.state = _state;\n    return _this;\n  }\n\n  var _proto = Downshift.prototype;\n  /**\n   * Clear all running timeouts\n   */\n\n  _proto.internalClearTimeouts = function internalClearTimeouts() {\n    this.timeoutIds.forEach(function (id) {\n      clearTimeout(id);\n    });\n    this.timeoutIds = [];\n  }\n  /**\n   * Gets the state based on internal state or props\n   * If a state value is passed via props, then that\n   * is the value given, otherwise it's retrieved from\n   * stateToMerge\n   *\n   * This will perform a shallow merge of the given state object\n   * with the state coming from props\n   * (for the controlled component scenario)\n   * This is used in state updater functions so they're referencing\n   * the right state regardless of where it comes from.\n   *\n   * @param {Object} stateToMerge defaults to this.state\n   * @return {Object} the state\n   */\n  ;\n\n  _proto.getState = function getState(stateToMerge) {\n    var _this4 = this;\n\n    if (stateToMerge === void 0) {\n      stateToMerge = this.state;\n    }\n\n    return Object.keys(stateToMerge).reduce(function (state, key) {\n      state[key] = _this4.isControlledProp(key) ? _this4.props[key] : stateToMerge[key];\n      return state;\n    }, {});\n  }\n  /**\n   * This determines whether a prop is a \"controlled prop\" meaning it is\n   * state which is controlled by the outside of this component rather\n   * than within this component.\n   * @param {String} key the key to check\n   * @return {Boolean} whether it is a controlled controlled prop\n   */\n  ;\n\n  _proto.isControlledProp = function isControlledProp(key) {\n    return this.props[key] !== undefined;\n  };\n\n  _proto.getItemCount = function getItemCount() {\n    // things read better this way. They're in priority order:\n    // 1. `this.itemCount`\n    // 2. `this.props.itemCount`\n    // 3. `this.items.length`\n    var itemCount = this.items.length;\n\n    if (this.itemCount != null) {\n      itemCount = this.itemCount;\n    } else if (this.props.itemCount !== undefined) {\n      itemCount = this.props.itemCount;\n    }\n\n    return itemCount;\n  };\n\n  _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n    return this.props.environment.document.getElementById(this.getItemId(index));\n  };\n\n  _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n    /* istanbul ignore else (react-native) */\n    {\n      var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n      this.props.scrollIntoView(node, this._menuNode);\n    }\n  };\n\n  _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n    var itemCount = this.getItemCount();\n\n    if (itemCount > 0) {\n      var nextHighlightedIndex = getNextWrappingIndex(amount, this.getState().highlightedIndex, itemCount);\n      this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n    }\n  };\n\n  _proto.highlightFirstOrLastIndex = function highlightFirstOrLastIndex(event, first, otherStateToSet) {\n    var itemsLastIndex = this.getItemCount() - 1;\n\n    if (itemsLastIndex < 0 || !this.getState().isOpen) {\n      return;\n    }\n\n    event.preventDefault();\n    this.setHighlightedIndex(first ? 0 : itemsLastIndex, otherStateToSet);\n  };\n\n  _proto.getStateAndHelpers = function getStateAndHelpers() {\n    var _this$getState6 = this.getState(),\n        highlightedIndex = _this$getState6.highlightedIndex,\n        inputValue = _this$getState6.inputValue,\n        selectedItem = _this$getState6.selectedItem,\n        isOpen = _this$getState6.isOpen;\n\n    var itemToString = this.props.itemToString;\n    var id = this.id;\n    var getRootProps = this.getRootProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getMenuProps = this.getMenuProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n    return {\n      // prop getters\n      getRootProps: getRootProps,\n      getToggleButtonProps: getToggleButtonProps,\n      getLabelProps: getLabelProps,\n      getMenuProps: getMenuProps,\n      getInputProps: getInputProps,\n      getItemProps: getItemProps,\n      // actions\n      reset: reset,\n      openMenu: openMenu,\n      closeMenu: closeMenu,\n      toggleMenu: toggleMenu,\n      selectItem: selectItem,\n      selectItemAtIndex: selectItemAtIndex,\n      selectHighlightedItem: selectHighlightedItem,\n      setHighlightedIndex: setHighlightedIndex,\n      clearSelection: clearSelection,\n      clearItems: clearItems,\n      setItemCount: setItemCount,\n      unsetItemCount: unsetItemCount,\n      setState: setState,\n      // props\n      itemToString: itemToString,\n      // derived\n      id: id,\n      // state\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      selectedItem: selectedItem\n    };\n  } //////////////////////////// ROOT\n  ;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this5 = this;\n    /* istanbul ignore if (react-native) */\n\n\n    if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n      validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n    }\n    /* istanbul ignore if (react-native) */\n\n\n    {\n      var targetWithinDownshift = function targetWithinDownshift(target, checkActiveElement) {\n        if (checkActiveElement === void 0) {\n          checkActiveElement = true;\n        }\n\n        var document = _this5.props.environment.document;\n        return [_this5._rootNode, _this5._menuNode].some(function (contextNode) {\n          return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n        });\n      }; // this.isMouseDown helps us track whether the mouse is currently held down.\n      // This is useful when the user clicks on an item in the list, but holds the mouse\n      // down long enough for the list to disappear (because the blur event fires on the input)\n      // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n      // trigger hiding the menu.\n\n\n      var onMouseDown = function onMouseDown() {\n        _this5.isMouseDown = true;\n      };\n\n      var onMouseUp = function onMouseUp(event) {\n        _this5.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n        // then we don't want to reset downshift\n\n        var contextWithinDownshift = targetWithinDownshift(event.target);\n\n        if (!contextWithinDownshift && _this5.getState().isOpen) {\n          _this5.reset({\n            type: mouseUp\n          }, function () {\n            return _this5.props.onOuterClick(_this5.getStateAndHelpers());\n          });\n        }\n      }; // Touching an element in iOS gives focus and hover states, but touching out of\n      // the element will remove hover, and persist the focus state, resulting in the\n      // blur event not being triggered.\n      // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n      // If the user taps outside of Downshift, the component should be reset,\n      // but not if the user is swiping\n\n\n      var onTouchStart = function onTouchStart() {\n        _this5.isTouchMove = false;\n      };\n\n      var onTouchMove = function onTouchMove() {\n        _this5.isTouchMove = true;\n      };\n\n      var onTouchEnd = function onTouchEnd(event) {\n        var contextWithinDownshift = targetWithinDownshift(event.target, false);\n\n        if (!_this5.isTouchMove && !contextWithinDownshift && _this5.getState().isOpen) {\n          _this5.reset({\n            type: touchEnd\n          }, function () {\n            return _this5.props.onOuterClick(_this5.getStateAndHelpers());\n          });\n        }\n      };\n\n      var environment = this.props.environment;\n      environment.addEventListener('mousedown', onMouseDown);\n      environment.addEventListener('mouseup', onMouseUp);\n      environment.addEventListener('touchstart', onTouchStart);\n      environment.addEventListener('touchmove', onTouchMove);\n      environment.addEventListener('touchend', onTouchEnd);\n\n      this.cleanup = function () {\n        _this5.internalClearTimeouts();\n\n        _this5.updateStatus.cancel();\n\n        environment.removeEventListener('mousedown', onMouseDown);\n        environment.removeEventListener('mouseup', onMouseUp);\n        environment.removeEventListener('touchstart', onTouchStart);\n        environment.removeEventListener('touchmove', onTouchMove);\n        environment.removeEventListener('touchend', onTouchEnd);\n      };\n    }\n  };\n\n  _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n    var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n        currentHighlightedIndex = _ref10.highlightedIndex;\n\n    var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n        prevHighlightedIndex = _ref11.highlightedIndex;\n\n    var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n    return scrollWhenOpen || currentHighlightedIndex !== prevHighlightedIndex;\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (process.env.NODE_ENV !== 'production') {\n      validateControlledUnchanged(prevProps, this.props);\n      /* istanbul ignore if (react-native) */\n\n      if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n    }\n\n    if (this.isControlledProp('selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n      this.internalSetState({\n        type: controlledPropUpdatedSelectedItem,\n        inputValue: this.props.itemToString(this.props.selectedItem)\n      });\n    }\n\n    if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n      this.scrollHighlightedItemIntoView();\n    }\n    /* istanbul ignore else (react-native) */\n\n\n    this.updateStatus();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.cleanup(); // avoids memory leak\n  };\n\n  _proto.render = function render() {\n    var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n    // we clear this out each render and it will be populated again as\n    // getItemProps is called.\n\n    this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n    // this render. If they do then we don't need to do anything,\n    // if they don't then we need to clone the element they return and\n    // apply the props for them.\n\n    this.getRootProps.called = false;\n    this.getRootProps.refKey = undefined;\n    this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n    this.getMenuProps.called = false;\n    this.getMenuProps.refKey = undefined;\n    this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n    this.getLabelProps.called = false; // and something similar for getInputProps\n\n    this.getInputProps.called = false;\n    var element = unwrapArray(children(this.getStateAndHelpers()));\n\n    if (!element) {\n      return null;\n    }\n\n    if (this.getRootProps.called || this.props.suppressRefError) {\n      if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n        validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n      }\n\n      return element;\n    } else if (isDOMElement(element)) {\n      // they didn't apply the root props, but we can clone\n      // this and apply the props ourselves\n      return cloneElement(element, this.getRootProps(getElementProps(element)));\n    }\n    /* istanbul ignore else */\n\n\n    if (process.env.NODE_ENV !== 'production') {\n      // they didn't apply the root props, but they need to\n      // otherwise we can't query around the autocomplete\n      throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n    }\n    /* istanbul ignore next */\n\n\n    return undefined;\n  };\n\n  return Downshift;\n}(Component);\n\nDownshift.defaultProps = {\n  defaultHighlightedIndex: null,\n  defaultIsOpen: false,\n  getA11yStatusMessage: getA11yStatusMessage,\n  itemToString: function itemToString(i) {\n    if (i == null) {\n      return '';\n    }\n\n    if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n      // eslint-disable-next-line no-console\n      console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n    }\n\n    return String(i);\n  },\n  onStateChange: noop,\n  onInputValueChange: noop,\n  onUserAction: noop,\n  onChange: noop,\n  onSelect: noop,\n  onOuterClick: noop,\n  selectedItemChanged: function selectedItemChanged(prevItem, item) {\n    return prevItem !== item;\n  },\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window,\n  stateReducer: function stateReducer(state, stateToSet) {\n    return stateToSet;\n  },\n  suppressRefError: false,\n  scrollIntoView: scrollIntoView\n};\nDownshift.stateChangeTypes = stateChangeTypes;\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nfunction validateControlledUnchanged(prevProps, nextProps) {\n  var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n  ['selectedItem', 'isOpen', 'inputValue', 'highlightedIndex'].forEach(function (propKey) {\n    if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n    } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n    }\n  });\n}\n\nfunction getElementIds(generateDefaultId, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      id = _ref.id,\n      labelId = _ref.labelId,\n      menuId = _ref.menuId,\n      getItemId = _ref.getItemId,\n      toggleButtonId = _ref.toggleButtonId;\n\n  var uniqueId = id === undefined ? \"downshift-\" + generateDefaultId() : id;\n  return {\n    labelId: labelId || uniqueId + \"-label\",\n    menuId: menuId || uniqueId + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return uniqueId + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || uniqueId + \"-toggle-button\"\n  };\n}\n\nfunction getNextWrappingIndex$1(moveAmount, baseIndex, itemsLength, circular) {\n  if (baseIndex === -1) {\n    return moveAmount > 0 ? 0 : itemsLength - 1;\n  }\n\n  var nextIndex = baseIndex + moveAmount;\n\n  if (nextIndex < 0) {\n    return circular ? itemsLength - 1 : 0;\n  }\n\n  if (nextIndex >= itemsLength) {\n    return circular ? 0 : itemsLength - 1;\n  }\n\n  return nextIndex;\n}\n\nfunction getItemIndexByCharacterKey(keysSoFar, highlightedIndex, items, itemToStringParam) {\n  var newHighlightedIndex = -1;\n  var itemStrings = items.map(function (item) {\n    return itemToStringParam(item).toLowerCase();\n  });\n  var startPosition = highlightedIndex + 1;\n  newHighlightedIndex = itemStrings.slice(startPosition).findIndex(function (itemString) {\n    return itemString.startsWith(keysSoFar);\n  });\n\n  if (newHighlightedIndex > -1) {\n    return newHighlightedIndex + startPosition;\n  } else {\n    return itemStrings.slice(0, startPosition).findIndex(function (itemString) {\n      return itemString.startsWith(keysSoFar);\n    });\n  }\n}\n\nfunction getState(state, props) {\n  return Object.keys(state).reduce(function (prevState, key) {\n    // eslint-disable-next-line no-param-reassign\n    prevState[key] = key in props ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n\nfunction getItemIndex(index, item, items) {\n  if (index !== undefined) {\n    return index;\n  }\n\n  if (items.length === 0) {\n    return -1;\n  }\n\n  return items.indexOf(item);\n}\n\nfunction itemToString(item) {\n  return item ? String(item) : '';\n}\n\nfunction getPropTypesValidator(caller, propTypes) {\n  // istanbul ignore next\n  return function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    Object.entries(propTypes).forEach(function (_ref2) {\n      var key = _ref2[0];\n      PropTypes.checkPropTypes(propTypes, options, key, caller.name);\n    });\n  };\n}\n\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\n\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\n\nfunction invokeOnChangeHandler(propKey, props, state, changes) {\n  var handler = \"on\" + capitalizeString(propKey) + \"Change\";\n\n  if (props[handler] && changes[propKey] !== undefined && changes[propKey] !== state[propKey]) {\n    props[handler](changes);\n  }\n}\n\nfunction callOnChangeProps(props, state, changes) {\n  Object.keys(state).forEach(function (stateKey) {\n    invokeOnChangeHandler(stateKey, props, state, changes);\n  });\n\n  if (props.onStateChange && changes !== undefined) {\n    props.onStateChange(changes);\n  }\n}\n\nfunction useEnhancedReducer(reducer, initialState, props) {\n  var enhancedReducer = useCallback(function (state, action) {\n    state = getState(state, action.props);\n    var stateReducer = action.props.stateReducer;\n    var changes = reducer(state, action);\n    var newState = stateReducer(state, _extends({}, action, {\n      changes: changes\n    }));\n    callOnChangeProps(action.props, state, newState);\n    return newState;\n  }, [reducer]);\n\n  var _useReducer = useReducer(enhancedReducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  return [getState(state, props), dispatch];\n}\n\nvar lastId = 0; // istanbul ignore next\n\nvar genId = function genId() {\n  return ++lastId;\n};\n/**\n * Autogenerate IDs to facilitate WAI-ARIA and server rendering.\n * Taken from @reach/auto-id\n * @see https://github.com/reach/reach-ui/blob/6e9dbcf716d5c9a3420e062e5bac1ac4671d01cb/packages/auto-id/src/index.js\n */\n// istanbul ignore next\n\n\nfunction useId() {\n  var _useState = useState(null),\n      id = _useState[0],\n      setId = _useState[1];\n\n  useEffect(function () {\n    return setId(genId());\n  }, []);\n  return id;\n}\n\nvar defaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null\n};\n\nfunction getA11yStatusMessage$1(_ref) {\n  var isOpen = _ref.isOpen,\n      items = _ref.items;\n\n  if (!items) {\n    return '';\n  }\n\n  var resultCount = items.length;\n\n  if (isOpen) {\n    if (resultCount === 0) {\n      return 'No results are available';\n    }\n\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n\nfunction getA11ySelectionMessage(_ref2) {\n  var selectedItem = _ref2.selectedItem,\n      itemToString = _ref2.itemToString;\n  return itemToString(selectedItem) + \" has been selected.\";\n}\n\nfunction getHighlightedIndexOnOpen(props, state, offset) {\n  var items = props.items,\n      initialHighlightedIndex = props.initialHighlightedIndex,\n      defaultHighlightedIndex = props.defaultHighlightedIndex;\n  var selectedItem = state.selectedItem,\n      highlightedIndex = state.highlightedIndex; // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n\n  if (initialHighlightedIndex !== undefined && highlightedIndex > -1) {\n    return initialHighlightedIndex;\n  }\n\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n\n  if (selectedItem) {\n    if (offset === 0) {\n      return items.indexOf(selectedItem);\n    }\n\n    return getNextWrappingIndex$1(offset, items.indexOf(selectedItem), items.length, false);\n  }\n\n  if (offset === 0) {\n    return -1;\n  }\n\n  return offset < 0 ? items.length - 1 : 0;\n}\n\nfunction getDefaultValue(props, propKey) {\n  var defaultPropKey = \"default\" + capitalizeString(propKey);\n\n  if (defaultPropKey in props) {\n    return props[defaultPropKey];\n  }\n\n  return defaultStateValues[propKey];\n}\n\nfunction getInitialValue(props, propKey) {\n  if (propKey in props) {\n    return props[propKey];\n  }\n\n  var initialPropKey = \"initial\" + capitalizeString(propKey);\n\n  if (initialPropKey in props) {\n    return props[initialPropKey];\n  }\n\n  return getDefaultValue(props, propKey);\n}\n\nfunction getInitialState(props) {\n  var selectedItem = getInitialValue(props, 'selectedItem');\n  var highlightedIndex = getInitialValue(props, 'highlightedIndex');\n  var isOpen = getInitialValue(props, 'isOpen');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem ? props.items.indexOf(selectedItem) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    keysSoFar: ''\n  };\n}\n\nvar propTypes = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\nvar MenuKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_down__' : 0;\nvar MenuKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_up__' : 1;\nvar MenuKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_escape__' : 2;\nvar MenuKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_home__' : 3;\nvar MenuKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_end__' : 4;\nvar MenuKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_enter__' : 5;\nvar MenuKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_character__' : 6;\nvar MenuBlur = process.env.NODE_ENV !== \"production\" ? '__menu_blur__' : 7;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 8;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 9;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 10;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 11;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 12;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 13;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 14;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 15;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 16;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 17;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 18;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 19;\nvar FunctionClearKeysSoFar = process.env.NODE_ENV !== \"production\" ? '__function_clear_keys_so_far__' : 20;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 21;\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  MenuKeyDownArrowDown: MenuKeyDownArrowDown,\n  MenuKeyDownArrowUp: MenuKeyDownArrowUp,\n  MenuKeyDownEscape: MenuKeyDownEscape,\n  MenuKeyDownHome: MenuKeyDownHome,\n  MenuKeyDownEnd: MenuKeyDownEnd,\n  MenuKeyDownEnter: MenuKeyDownEnter,\n  MenuKeyDownCharacter: MenuKeyDownCharacter,\n  MenuBlur: MenuBlur,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonClick: ToggleButtonClick,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionClearKeysSoFar: FunctionClearKeysSoFar,\n  FunctionReset: FunctionReset\n});\n/* eslint-disable complexity */\n\nfunction downshiftSelectReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemMouseMove:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n\n    case MenuBlur:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex$1(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, props.circularNavigation)\n      };\n      break;\n\n    case MenuKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex$1(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, props.circularNavigation)\n      };\n      break;\n\n    case MenuKeyDownHome:\n      changes = {\n        highlightedIndex: 0\n      };\n      break;\n\n    case MenuKeyDownEnd:\n      changes = {\n        highlightedIndex: props.items.length - 1\n      };\n      break;\n\n    case MenuKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuKeyDownEnter:\n      changes = _extends({\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex')\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n\n    case MenuKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var keysSoFar = \"\" + state.keysSoFar + lowercasedKey;\n        var highlightedIndex = getItemIndexByCharacterKey(keysSoFar, state.highlightedIndex, props.items, props.itemToString);\n        changes = _extends({\n          keysSoFar: keysSoFar\n        }, highlightedIndex >= 0 && {\n          highlightedIndex: highlightedIndex\n        });\n      }\n      break;\n\n    case MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonKeyDownCharacter:\n      {\n        var _lowercasedKey = action.key;\n\n        var _keysSoFar = \"\" + state.keysSoFar + _lowercasedKey;\n\n        var itemIndex = getItemIndexByCharacterKey(_keysSoFar, state.selectedItem ? props.items.indexOf(state.selectedItem) : -1, props.items, props.itemToString);\n        changes = _extends({\n          keysSoFar: _keysSoFar\n        }, itemIndex >= 0 && {\n          selectedItem: props.items[itemIndex]\n        });\n      }\n      break;\n\n    case ToggleButtonKeyDownArrowDown:\n      {\n        changes = {\n          isOpen: true,\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, 1)\n        };\n        break;\n      }\n\n    case ToggleButtonKeyDownArrowUp:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, -1)\n      };\n      break;\n\n    case ToggleButtonClick:\n    case FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n\n    case FunctionClearKeysSoFar:\n      changes = {\n        keysSoFar: ''\n      };\n      break;\n\n    case FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, {}, changes);\n}\n/* eslint-enable complexity */\n\n\nvar validatePropTypes = getPropTypesValidator(useSelect, propTypes);\nvar defaultProps = {\n  itemToString: itemToString,\n  stateReducer: function stateReducer(s, a) {\n    return a.changes;\n  },\n  getA11yStatusMessage: getA11yStatusMessage$1,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window\n};\nuseSelect.stateChangeTypes = stateChangeTypes$1;\n\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  validatePropTypes(userProps); // Props defaults and destructuring.\n\n  var props = _extends({}, defaultProps, {}, userProps);\n\n  var items = props.items,\n      itemToString = props.itemToString,\n      getA11yStatusMessage = props.getA11yStatusMessage,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment; // Initial state depending on controlled props.\n\n  var initialState = getInitialState(props); // Reducer init.\n\n  var _useEnhancedReducer = useEnhancedReducer(downshiftSelectReducer, initialState, props),\n      _useEnhancedReducer$ = _useEnhancedReducer[0],\n      isOpen = _useEnhancedReducer$.isOpen,\n      highlightedIndex = _useEnhancedReducer$.highlightedIndex,\n      selectedItem = _useEnhancedReducer$.selectedItem,\n      keysSoFar = _useEnhancedReducer$.keysSoFar,\n      dispatchWithoutProps = _useEnhancedReducer[1];\n\n  var dispatch = function dispatch(action) {\n    return dispatchWithoutProps(_extends({\n      props: props\n    }, action));\n  }; // IDs generation.\n\n\n  var _getElementIds = getElementIds(useId, props),\n      labelId = _getElementIds.labelId,\n      getItemId = _getElementIds.getItemId,\n      menuId = _getElementIds.menuId,\n      toggleButtonId = _getElementIds.toggleButtonId;\n  /* Refs */\n\n\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef();\n  itemRefs.current = [];\n  var isInitialMount = useRef(true);\n  var shouldScroll = useRef(true);\n  var clearTimeout = useRef(null);\n  /* Effects */\n\n  /* Sets a11y status message on changes in isOpen. */\n\n  useEffect(function () {\n    if (isInitialMount.current) {\n      return;\n    }\n\n    setStatus(getA11yStatusMessage({\n      isOpen: isOpen,\n      items: items,\n      selectedItem: selectedItem,\n      itemToString: itemToString\n    }), environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen]);\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMount.current) {\n      return;\n    }\n\n    setStatus(getA11ySelectionMessage({\n      isOpen: isOpen,\n      items: items,\n      selectedItem: selectedItem,\n      itemToString: itemToString\n    }), environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]);\n  /* Sets cleanup for the keysSoFar after 500ms. */\n\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    if (isInitialMount.current) {\n      clearTimeout.current = debounce(function () {\n        dispatch({\n          type: FunctionClearKeysSoFar\n        });\n      }, 500);\n    }\n\n    if (!keysSoFar) {\n      return;\n    }\n\n    clearTimeout.current(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [keysSoFar]);\n  /* Controls the focus on the menu or the toggle button. */\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMount.current) {\n      // Unless it was initialised as open.\n      if (initialIsOpen || defaultIsOpen || isOpen) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus menu on open.\n    // istanbul ignore next\n\n\n    if (isOpen) {\n      menuRef.current.focus(); // Focus toggleButton on close.\n    } else if (environment.document.activeElement === menuRef.current) {\n      toggleButtonRef.current.focus();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]);\n  /* Scroll on highlighted item if change comes from keyboard. */\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !itemRefs.current.length) {\n      return;\n    }\n\n    if (shouldScroll.current === false) {\n      shouldScroll.current = true;\n    } else {\n      scrollIntoView(itemRefs.current[highlightedIndex], menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]);\n  /* Make initial ref false. */\n\n  useEffect(function () {\n    isInitialMount.current = false;\n  }, []);\n  /* Event handler functions */\n\n  var menuKeyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownArrowDown,\n        shiftKey: event.shiftKey\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownArrowUp,\n        shiftKey: event.shiftKey\n      });\n    },\n    Home: function Home(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownHome\n      });\n    },\n    End: function End(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownEnd\n      });\n    },\n    Escape: function Escape() {\n      dispatch({\n        type: MenuKeyDownEscape\n      });\n    },\n    Enter: function Enter(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownEnter\n      });\n    },\n    Tab: function Tab(event) {\n      // The exception that calls MenuBlur.\n      // istanbul ignore next\n      if (event.shiftKey) {\n        dispatch({\n          type: MenuBlur\n        });\n      }\n    }\n  };\n  var toggleButtonKeyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      dispatch({\n        type: ToggleButtonKeyDownArrowDown\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      dispatch({\n        type: ToggleButtonKeyDownArrowUp\n      });\n    }\n  }; // Event handlers.\n\n  var menuHandleKeyDown = function menuHandleKeyDown(event) {\n    var key = normalizeArrowKey(event);\n\n    if (key && menuKeyDownHandlers[key]) {\n      menuKeyDownHandlers[key](event);\n    } else if (isAcceptedCharacterKey(key)) {\n      dispatch({\n        type: MenuKeyDownCharacter,\n        key: key\n      });\n    }\n  }; // Focus going back to the toggleButton is something we control (Escape, Enter, Click).\n  // We are toggleing special actions for these cases in reducer, not MenuBlur.\n  // Since Shift-Tab also lands focus on toggleButton, we will handle it as exception and call MenuBlur.\n\n\n  var menuHandleBlur = function menuHandleBlur(event) {\n    if (event.relatedTarget !== toggleButtonRef.current) {\n      dispatch({\n        type: MenuBlur\n      });\n    }\n  };\n\n  var menuHandleMouseLeave = function menuHandleMouseLeave() {\n    dispatch({\n      type: MenuMouseLeave\n    });\n  };\n\n  var toggleButtonHandleClick = function toggleButtonHandleClick() {\n    dispatch({\n      type: ToggleButtonClick\n    });\n  };\n\n  var toggleButtonHandleKeyDown = function toggleButtonHandleKeyDown(event) {\n    var key = normalizeArrowKey(event);\n\n    if (key && toggleButtonKeyDownHandlers[key]) {\n      toggleButtonKeyDownHandlers[key](event);\n    } else if (isAcceptedCharacterKey(key)) {\n      dispatch({\n        type: ToggleButtonKeyDownCharacter,\n        key: key\n      });\n    }\n  };\n\n  var itemHandleMouseMove = function itemHandleMouseMove(index) {\n    if (index === highlightedIndex) {\n      return;\n    }\n\n    shouldScroll.current = false;\n    dispatch({\n      type: ItemMouseMove,\n      index: index\n    });\n  };\n\n  var itemHandleClick = function itemHandleClick(index) {\n    dispatch({\n      type: ItemClick,\n      index: index\n    });\n  }; // returns\n\n\n  return {\n    // prop getters.\n    getToggleButtonProps: function getToggleButtonProps(_temp2) {\n      var _extends3;\n\n      var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          onClick = _ref2.onClick,\n          onKeyDown = _ref2.onKeyDown,\n          _ref2$refKey = _ref2.refKey,\n          refKey = _ref2$refKey === void 0 ? 'ref' : _ref2$refKey,\n          ref = _ref2.ref,\n          rest = _objectWithoutPropertiesLoose(_ref2, [\"onClick\", \"onKeyDown\", \"refKey\", \"ref\"]);\n\n      var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n        toggleButtonRef.current = toggleButtonNode;\n      }), _extends3.id = toggleButtonId, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-expanded'] = isOpen, _extends3['aria-labelledby'] = labelId + \" \" + toggleButtonId, _extends3), rest);\n\n      if (!rest.disabled) {\n        toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n        toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n      }\n\n      return toggleProps;\n    },\n    getLabelProps: function getLabelProps(labelProps) {\n      return _extends({\n        id: labelId,\n        htmlFor: toggleButtonId\n      }, labelProps);\n    },\n    getMenuProps: function getMenuProps(_temp) {\n      var _extends2;\n\n      var _ref = _temp === void 0 ? {} : _temp,\n          onKeyDown = _ref.onKeyDown,\n          onBlur = _ref.onBlur,\n          onMouseLeave = _ref.onMouseLeave,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          ref = _ref.ref,\n          rest = _objectWithoutPropertiesLoose(_ref, [\"onKeyDown\", \"onBlur\", \"onMouseLeave\", \"refKey\", \"ref\"]);\n\n      return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n        menuRef.current = menuNode;\n      }), _extends2.id = menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = labelId, _extends2.tabIndex = -1, _extends2), highlightedIndex > -1 && {\n        'aria-activedescendant': getItemId(highlightedIndex)\n      }, {\n        onKeyDown: callAllEventHandlers(onKeyDown, menuHandleKeyDown),\n        onBlur: callAllEventHandlers(onBlur, menuHandleBlur),\n        onMouseLeave: callAllEventHandlers(onMouseLeave, menuHandleMouseLeave)\n      }, rest);\n    },\n    getItemProps: function getItemProps(_temp3) {\n      var _extends4;\n\n      var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          item = _ref3.item,\n          index = _ref3.index,\n          _ref3$refKey = _ref3.refKey,\n          refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n          ref = _ref3.ref,\n          onMouseMove = _ref3.onMouseMove,\n          onClick = _ref3.onClick,\n          rest = _objectWithoutPropertiesLoose(_ref3, [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onClick\"]);\n\n      var itemIndex = getItemIndex(index, item, items);\n\n      if (itemIndex < 0) {\n        throw new Error('Pass either item or item index in getItemProps!');\n      }\n\n      return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n        if (itemNode) {\n          itemRefs.current.push(itemNode);\n        }\n      }), _extends4.role = 'option', _extends4), itemIndex === highlightedIndex && {\n        'aria-selected': true\n      }, {\n        id: getItemId(itemIndex),\n        onMouseMove: callAllEventHandlers(onMouseMove, function () {\n          return itemHandleMouseMove(itemIndex);\n        }),\n        onClick: callAllEventHandlers(onClick, function () {\n          return itemHandleClick(itemIndex);\n        })\n      }, rest);\n    },\n    // actions.\n    toggleMenu: function toggleMenu() {\n      dispatch({\n        type: FunctionToggleMenu\n      });\n    },\n    openMenu: function openMenu() {\n      dispatch({\n        type: FunctionOpenMenu\n      });\n    },\n    closeMenu: function closeMenu() {\n      dispatch({\n        type: FunctionCloseMenu\n      });\n    },\n    setHighlightedIndex: function setHighlightedIndex(newHighlightedIndex) {\n      dispatch({\n        type: FunctionSetHighlightedIndex,\n        highlightedIndex: newHighlightedIndex\n      });\n    },\n    selectItem: function selectItem(newSelectedItem) {\n      dispatch({\n        type: FunctionSelectItem,\n        selectedItem: newSelectedItem\n      });\n    },\n    reset: function reset() {\n      dispatch({\n        type: FunctionReset\n      });\n    },\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem\n  };\n}\n\nexport default Downshift;\nexport { resetIdCounter, useSelect };","map":{"version":3,"sources":["/Applications/MAMP/htdocs/project/client/node_modules/downshift/dist/downshift.esm.js"],"names":["_objectWithoutPropertiesLoose","_extends","_assertThisInitialized","_inheritsLoose","PropTypes","cloneElement","Component","useCallback","useReducer","useState","useEffect","useRef","isForwardRef","computeScrollIntoView","idCounter","cbToCb","cb","noop","scrollIntoView","node","menuNode","actions","boundary","block","scrollMode","forEach","_ref","el","top","left","scrollTop","scrollLeft","isOrContainsNode","parent","child","contains","debounce","fn","time","timeoutId","cancel","clearTimeout","wrapper","_len","arguments","length","args","Array","_key","setTimeout","apply","callAllEventHandlers","_len2","fns","_key2","event","_len3","_key3","some","concat","preventDownshiftDefault","hasOwnProperty","nativeEvent","handleRefs","_len4","refs","_key4","ref","current","generateId","String","resetIdCounter","getA11yStatusMessage","_ref2","isOpen","selectedItem","resultCount","previousResultCount","itemToString","unwrapArray","arg","defaultValue","isArray","isDOMElement","element","type","getElementProps","props","requiredProp","fnName","propName","console","error","stateKeys","pickState","state","result","k","normalizeArrowKey","key","keyCode","indexOf","isPlainObject","obj","Object","prototype","toString","call","getNextWrappingIndex","moveAmount","baseIndex","itemCount","itemsLastIndex","newIndex","cleanupStatus","getStatusDiv","textContent","setStatus","status","documentProp","div","document","statusDiv","getElementById","createElement","setAttribute","assign","style","border","clip","height","margin","overflow","padding","position","width","body","appendChild","unknown","process","env","NODE_ENV","mouseUp","itemMouseEnter","keyDownArrowUp","keyDownArrowDown","keyDownEscape","keyDownEnter","keyDownHome","keyDownEnd","clickItem","blurInput","changeInput","keyDownSpaceButton","clickButton","blurButton","controlledPropUpdatedSelectedItem","touchEnd","stateChangeTypes","freeze","__proto__","Downshift","_Component","_props","_this","id","menuId","labelId","inputId","getItemId","index","input","items","timeoutIds","internalSetTimeout","filter","i","push","setItemCount","count","unsetItemCount","setHighlightedIndex","highlightedIndex","otherStateToSet","defaultHighlightedIndex","internalSetState","clearSelection","inputValue","defaultIsOpen","selectItem","item","selectItemAtIndex","itemIndex","selectHighlightedItem","getState","stateToSet","isItemSelected","onChangeArg","onStateChangeArg","isStateToSetFunction","onInputValueChange","getStateAndHelpers","setState","newStateToSet","stateReducer","nextState","nextFullState","keys","isControlledProp","hasMoreStateThanType","onStateChange","onSelect","undefined","onChange","onUserAction","rootRef","_rootNode","getRootProps","_temp","_temp2","_extends2","_ref$refKey","refKey","rest","_ref2$suppressRefErro","suppressRefError","called","_this$getState","role","keyDownHandlers","ArrowDown","_this2","preventDefault","amount","shiftKey","moveHighlightedIndex","getItemCount","ArrowUp","_this3","Enter","_this$getState2","itemNode","getItemNodeFromIndex","hasAttribute","Escape","reset","buttonKeyDownHandlers","_","toggleMenu","inputKeyDownHandlers","Home","highlightFirstOrLastIndex","End","getToggleButtonProps","_temp3","_ref3","onClick","onPress","onKeyDown","onKeyUp","onBlur","_this$getState3","enabledEventHandlers","buttonHandleClick","buttonHandleKeyDown","buttonHandleKeyUp","buttonHandleBlur","eventHandlers","disabled","environment","activeElement","target","focus","blurTarget","isMouseDown","getLabelProps","htmlFor","getInputProps","_temp4","_ref4","onInput","onChangeText","onChangeKey","_this$getState4","_eventHandlers","inputHandleChange","inputHandleKeyDown","inputHandleBlur","autoComplete","value","downshiftButtonIsActive","dataset","toggle","menuRef","_menuNode","getMenuProps","_temp5","_temp6","_extends3","_ref5","_ref5$refKey","_ref6","_ref6$suppressRefErro","getItemProps","_temp7","_enabledEventHandlers","_ref7","onMouseMove","onMouseDown","_ref7$item","onSelectKey","customClickHandler","avoidScrolling","clearItems","_ref8","_ref9","_this$getState5","openMenu","closeMenu","updateStatus","highlightedItem","_this$props","_this$props$initialHi","initialHighlightedIndex","_highlightedIndex","_this$props$initialIs","initialIsOpen","_isOpen","_this$props$initialIn","initialInputValue","_inputValue","_this$props$initialSe","initialSelectedItem","_selectedItem","_state","_proto","internalClearTimeouts","stateToMerge","_this4","reduce","scrollHighlightedItemIntoView","nextHighlightedIndex","first","_this$getState6","componentDidMount","_this5","validateGetMenuPropsCalledCorrectly","targetWithinDownshift","checkActiveElement","contextNode","onMouseUp","contextWithinDownshift","onOuterClick","onTouchStart","isTouchMove","onTouchMove","onTouchEnd","addEventListener","cleanup","removeEventListener","shouldScroll","prevState","prevProps","_ref10","currentHighlightedIndex","_ref11","prevHighlightedIndex","scrollWhenOpen","componentDidUpdate","validateControlledUnchanged","selectedItemChanged","componentWillUnmount","render","children","validateGetRootPropsCalledCorrectly","Error","defaultProps","warn","prevItem","window","propTypes","func","number","bool","any","string","shape","_ref12","_ref13","refKeySpecified","isComposite","nextProps","warningDescription","propKey","getElementIds","generateDefaultId","toggleButtonId","uniqueId","getNextWrappingIndex$1","itemsLength","circular","nextIndex","getItemIndexByCharacterKey","keysSoFar","itemToStringParam","newHighlightedIndex","itemStrings","map","toLowerCase","startPosition","slice","findIndex","itemString","startsWith","getItemIndex","getPropTypesValidator","caller","options","entries","checkPropTypes","name","isAcceptedCharacterKey","test","capitalizeString","toUpperCase","invokeOnChangeHandler","changes","handler","callOnChangeProps","stateKey","useEnhancedReducer","reducer","initialState","enhancedReducer","action","newState","_useReducer","dispatch","lastId","genId","useId","_useState","setId","defaultStateValues","getA11yStatusMessage$1","getA11ySelectionMessage","getHighlightedIndexOnOpen","offset","getDefaultValue","defaultPropKey","getInitialValue","initialPropKey","getInitialState","array","isRequired","circularNavigation","defaultSelectedItem","onSelectedItemChange","onHighlightedIndexChange","onIsOpenChange","MenuKeyDownArrowDown","MenuKeyDownArrowUp","MenuKeyDownEscape","MenuKeyDownHome","MenuKeyDownEnd","MenuKeyDownEnter","MenuKeyDownCharacter","MenuBlur","MenuMouseLeave","ItemMouseMove","ItemClick","ToggleButtonKeyDownCharacter","ToggleButtonKeyDownArrowDown","ToggleButtonKeyDownArrowUp","ToggleButtonClick","FunctionToggleMenu","FunctionOpenMenu","FunctionCloseMenu","FunctionSetHighlightedIndex","FunctionSelectItem","FunctionClearKeysSoFar","FunctionReset","stateChangeTypes$1","downshiftSelectReducer","lowercasedKey","_lowercasedKey","_keysSoFar","validatePropTypes","useSelect","s","a","userProps","_useEnhancedReducer","_useEnhancedReducer$","dispatchWithoutProps","_getElementIds","toggleButtonRef","itemRefs","isInitialMount","menuKeyDownHandlers","Tab","toggleButtonKeyDownHandlers","menuHandleKeyDown","menuHandleBlur","relatedTarget","menuHandleMouseLeave","toggleButtonHandleClick","toggleButtonHandleKeyDown","itemHandleMouseMove","itemHandleClick","_ref2$refKey","toggleProps","toggleButtonNode","labelProps","onMouseLeave","tabIndex","_extends4","_ref3$refKey","newSelectedItem"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport { cloneElement, Component, useCallback, useReducer, useState, useEffect, useRef } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\n\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (node === null) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n      selectedItem = _ref2.selectedItem,\n      resultCount = _ref2.resultCount,\n      previousResultCount = _ref2.previousResultCount,\n      itemToString = _ref2.itemToString;\n\n  if (!isOpen) {\n    return selectedItem ? itemToString(selectedItem) : '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount) {\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = itemsLastIndex;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = 0;\n  }\n\n  return newIndex;\n}\n\nvar cleanupStatus = debounce(function () {\n  getStatusDiv().textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n\n  if (!status) {\n    return;\n  }\n\n  div.textContent = status;\n  cleanupStatus();\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\n\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar Downshift =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Downshift, _Component);\n\n  function Downshift(_props) {\n    var _this = _Component.call(this, _props) || this;\n\n    _this.id = _this.props.id || \"downshift-\" + generateId();\n    _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n    _this.labelId = _this.props.labelId || _this.id + \"-label\";\n    _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n    _this.getItemId = _this.props.getItemId || function (index) {\n      return _this.id + \"-item-\" + index;\n    };\n\n    _this.input = null;\n    _this.items = [];\n    _this.itemCount = null;\n    _this.previousResultCount = 0;\n    _this.timeoutIds = [];\n\n    _this.internalSetTimeout = function (fn, time) {\n      var id = setTimeout(function () {\n        _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n          return i !== id;\n        });\n        fn();\n      }, time);\n\n      _this.timeoutIds.push(id);\n    };\n\n    _this.setItemCount = function (count) {\n      _this.itemCount = count;\n    };\n\n    _this.unsetItemCount = function () {\n      _this.itemCount = null;\n    };\n\n    _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n      if (highlightedIndex === void 0) {\n        highlightedIndex = _this.props.defaultHighlightedIndex;\n      }\n\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(_extends({\n        highlightedIndex: highlightedIndex\n      }, otherStateToSet));\n    };\n\n    _this.clearSelection = function (cb) {\n      _this.internalSetState({\n        selectedItem: null,\n        inputValue: '',\n        highlightedIndex: _this.props.defaultHighlightedIndex,\n        isOpen: _this.props.defaultIsOpen\n      }, cb);\n    };\n\n    _this.selectItem = function (item, otherStateToSet, cb) {\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(_extends({\n        isOpen: _this.props.defaultIsOpen,\n        highlightedIndex: _this.props.defaultHighlightedIndex,\n        selectedItem: item,\n        inputValue: _this.props.itemToString(item)\n      }, otherStateToSet), cb);\n    };\n\n    _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n      var item = _this.items[itemIndex];\n\n      if (item == null) {\n        return;\n      }\n\n      _this.selectItem(item, otherStateToSet, cb);\n    };\n\n    _this.selectHighlightedItem = function (otherStateToSet, cb) {\n      return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n    };\n\n    _this.internalSetState = function (stateToSet, cb) {\n      var isItemSelected, onChangeArg;\n      var onStateChangeArg = {};\n      var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n      // so someone controlling the `inputValue` state gets notified of\n      // the input change as soon as possible. This avoids issues with\n      // preserving the cursor position.\n      // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n      if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n        _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), {}, stateToSet));\n      }\n\n      return _this.setState(function (state) {\n        state = _this.getState(state);\n        var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n        newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n        // what was selected before\n        // used to determine if onSelect and onChange callbacks should be called\n\n        isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n        var nextState = {}; // this is just used to tell whether the state changed\n\n        var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n        // and we're trying to update that state. OR if the selection has changed and we're\n        // trying to update the selection\n\n        if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n          onChangeArg = newStateToSet.selectedItem;\n        }\n\n        newStateToSet.type = newStateToSet.type || unknown;\n        Object.keys(newStateToSet).forEach(function (key) {\n          // onStateChangeArg should only have the state that is\n          // actually changing\n          if (state[key] !== newStateToSet[key]) {\n            onStateChangeArg[key] = newStateToSet[key];\n          } // the type is useful for the onStateChangeArg\n          // but we don't actually want to set it in internal state.\n          // this is an undocumented feature for now... Not all internalSetState\n          // calls support it and I'm not certain we want them to yet.\n          // But it enables users controlling the isOpen state to know when\n          // the isOpen state changes due to mouseup events which is quite handy.\n\n\n          if (key === 'type') {\n            return;\n          }\n\n          nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n          if (!_this.isControlledProp(key)) {\n            nextState[key] = newStateToSet[key];\n          }\n        }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n        // earlier, so we'll call it now that we know what the inputValue state will be.\n\n        if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), {}, newStateToSet));\n        }\n\n        return nextState;\n      }, function () {\n        // call the provided callback if it's a function\n        cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n        // we have relevant information to pass them.\n\n        var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n        if (hasMoreStateThanType) {\n          _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n        }\n\n        if (isItemSelected) {\n          _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n        }\n\n        if (onChangeArg !== undefined) {\n          _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n        } // this is currently undocumented and therefore subject to change\n        // We'll try to not break it, but just be warned.\n\n\n        _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n      });\n    };\n\n    _this.rootRef = function (node) {\n      return _this._rootNode = node;\n    };\n\n    _this.getRootProps = function (_temp, _temp2) {\n      var _extends2;\n\n      var _ref = _temp === void 0 ? {} : _temp,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          ref = _ref.ref,\n          rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\", \"ref\"]);\n\n      var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          _ref2$suppressRefErro = _ref2.suppressRefError,\n          suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n      // this is used in the render to know whether the user has called getRootProps.\n      // It uses that to know whether to apply the props automatically\n      _this.getRootProps.called = true;\n      _this.getRootProps.refKey = refKey;\n      _this.getRootProps.suppressRefError = suppressRefError;\n\n      var _this$getState = _this.getState(),\n          isOpen = _this$getState.isOpen;\n\n      return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n    };\n\n    _this.keyDownHandlers = {\n      ArrowDown: function ArrowDown(event) {\n        var _this2 = this;\n\n        event.preventDefault();\n\n        if (this.getState().isOpen) {\n          var amount = event.shiftKey ? 5 : 1;\n          this.moveHighlightedIndex(amount, {\n            type: keyDownArrowDown\n          });\n        } else {\n          this.internalSetState({\n            isOpen: true,\n            type: keyDownArrowDown\n          }, function () {\n            var itemCount = _this2.getItemCount();\n\n            if (itemCount > 0) {\n              _this2.setHighlightedIndex(getNextWrappingIndex(1, _this2.getState().highlightedIndex, itemCount), {\n                type: keyDownArrowDown\n              });\n            }\n          });\n        }\n      },\n      ArrowUp: function ArrowUp(event) {\n        var _this3 = this;\n\n        event.preventDefault();\n\n        if (this.getState().isOpen) {\n          var amount = event.shiftKey ? -5 : -1;\n          this.moveHighlightedIndex(amount, {\n            type: keyDownArrowUp\n          });\n        } else {\n          this.internalSetState({\n            isOpen: true,\n            type: keyDownArrowUp\n          }, function () {\n            var itemCount = _this3.getItemCount();\n\n            if (itemCount > 0) {\n              _this3.setHighlightedIndex(getNextWrappingIndex(-1, _this3.getState().highlightedIndex, itemCount), {\n                type: keyDownArrowDown\n              });\n            }\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var _this$getState2 = this.getState(),\n            isOpen = _this$getState2.isOpen,\n            highlightedIndex = _this$getState2.highlightedIndex;\n\n        if (isOpen && highlightedIndex != null) {\n          event.preventDefault();\n          var item = this.items[highlightedIndex];\n          var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n          if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n            return;\n          }\n\n          this.selectHighlightedItem({\n            type: keyDownEnter\n          });\n        }\n      },\n      Escape: function Escape(event) {\n        event.preventDefault();\n        this.reset({\n          type: keyDownEscape,\n          selectedItem: null,\n          inputValue: ''\n        });\n      }\n    };\n    _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n      ' ': function _(event) {\n        event.preventDefault();\n        this.toggleMenu({\n          type: keyDownSpaceButton\n        });\n      }\n    });\n    _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n      Home: function Home(event) {\n        this.highlightFirstOrLastIndex(event, true, {\n          type: keyDownHome\n        });\n      },\n      End: function End(event) {\n        this.highlightFirstOrLastIndex(event, false, {\n          type: keyDownEnd\n        });\n      }\n    });\n\n    _this.getToggleButtonProps = function (_temp3) {\n      var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          onClick = _ref3.onClick,\n          onPress = _ref3.onPress,\n          onKeyDown = _ref3.onKeyDown,\n          onKeyUp = _ref3.onKeyUp,\n          onBlur = _ref3.onBlur,\n          rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n      var _this$getState3 = _this.getState(),\n          isOpen = _this$getState3.isOpen;\n\n      var enabledEventHandlers = {\n        onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n        onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n        onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n        onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n      };\n      var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n      return _extends({\n        type: 'button',\n        role: 'button',\n        'aria-label': isOpen ? 'close menu' : 'open menu',\n        'aria-haspopup': true,\n        'data-toggle': true\n      }, eventHandlers, {}, rest);\n    };\n\n    _this.buttonHandleKeyUp = function (event) {\n      // Prevent click event from emitting in Firefox\n      event.preventDefault();\n    };\n\n    _this.buttonHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (_this.buttonKeyDownHandlers[key]) {\n        _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n      }\n    };\n\n    _this.buttonHandleClick = function (event) {\n      event.preventDefault(); // handle odd case for Safari and Firefox which\n      // don't give the button the focus properly.\n\n      /* istanbul ignore if (can't reasonably test this) */\n\n      if ( _this.props.environment.document.activeElement === _this.props.environment.document.body) {\n        event.target.focus();\n      } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n      // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n      // when building for production and should therefore have no impact on production code.\n\n\n      if (process.env.NODE_ENV === 'test') {\n        _this.toggleMenu({\n          type: clickButton\n        });\n      } else {\n        // Ensure that toggle of menu occurs after the potential blur event in iOS\n        _this.internalSetTimeout(function () {\n          return _this.toggleMenu({\n            type: clickButton\n          });\n        });\n      }\n    };\n\n    _this.buttonHandleBlur = function (event) {\n      var blurTarget = event.target; // Save blur target for comparison with activeElement later\n      // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n      _this.internalSetTimeout(function () {\n        if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n        ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n      });\n    };\n\n    _this.getLabelProps = function (props) {\n      return _extends({\n        htmlFor: _this.inputId,\n        id: _this.labelId\n      }, props);\n    };\n\n    _this.getInputProps = function (_temp4) {\n      var _ref4 = _temp4 === void 0 ? {} : _temp4,\n          onKeyDown = _ref4.onKeyDown,\n          onBlur = _ref4.onBlur,\n          onChange = _ref4.onChange,\n          onInput = _ref4.onInput,\n          onChangeText = _ref4.onChangeText,\n          rest = _objectWithoutPropertiesLoose(_ref4, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n      var onChangeKey;\n      var eventHandlers = {};\n      /* istanbul ignore next (preact) */\n\n      onChangeKey = 'onChange';\n\n      var _this$getState4 = _this.getState(),\n          inputValue = _this$getState4.inputValue,\n          isOpen = _this$getState4.isOpen,\n          highlightedIndex = _this$getState4.highlightedIndex;\n\n      if (!rest.disabled) {\n        var _eventHandlers;\n\n        eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      return _extends({\n        'aria-autocomplete': 'list',\n        'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n        'aria-controls': isOpen ? _this.menuId : null,\n        'aria-labelledby': _this.labelId,\n        // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n        // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n        autoComplete: 'off',\n        value: inputValue,\n        id: _this.inputId\n      }, eventHandlers, {}, rest);\n    };\n\n    _this.inputHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && _this.inputKeyDownHandlers[key]) {\n        _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n      }\n    };\n\n    _this.inputHandleChange = function (event) {\n      _this.internalSetState({\n        type: changeInput,\n        isOpen: true,\n        inputValue: event.target.value,\n        highlightedIndex: _this.props.defaultHighlightedIndex\n      });\n    };\n\n    _this.inputHandleBlur = function () {\n      // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n      _this.internalSetTimeout(function () {\n        var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n        if (!_this.isMouseDown && !downshiftButtonIsActive) {\n          _this.reset({\n            type: blurInput\n          });\n        }\n      });\n    };\n\n    _this.menuRef = function (node) {\n      _this._menuNode = node;\n    };\n\n    _this.getMenuProps = function (_temp5, _temp6) {\n      var _extends3;\n\n      var _ref5 = _temp5 === void 0 ? {} : _temp5,\n          _ref5$refKey = _ref5.refKey,\n          refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n          ref = _ref5.ref,\n          props = _objectWithoutPropertiesLoose(_ref5, [\"refKey\", \"ref\"]);\n\n      var _ref6 = _temp6 === void 0 ? {} : _temp6,\n          _ref6$suppressRefErro = _ref6.suppressRefError,\n          suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n\n      _this.getMenuProps.called = true;\n      _this.getMenuProps.refKey = refKey;\n      _this.getMenuProps.suppressRefError = suppressRefError;\n      return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n    };\n\n    _this.getItemProps = function (_temp7) {\n      var _enabledEventHandlers;\n\n      var _ref7 = _temp7 === void 0 ? {} : _temp7,\n          onMouseMove = _ref7.onMouseMove,\n          onMouseDown = _ref7.onMouseDown,\n          onClick = _ref7.onClick,\n          onPress = _ref7.onPress,\n          index = _ref7.index,\n          _ref7$item = _ref7.item,\n          item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ?\n      /* istanbul ignore next */\n      undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n          rest = _objectWithoutPropertiesLoose(_ref7, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n      if (index === undefined) {\n        _this.items.push(item);\n\n        index = _this.items.indexOf(item);\n      } else {\n        _this.items[index] = item;\n      }\n\n      var onSelectKey = 'onClick';\n      var customClickHandler = onClick;\n      var enabledEventHandlers = (_enabledEventHandlers = {\n        // onMouseMove is used over onMouseEnter here. onMouseMove\n        // is only triggered on actual mouse movement while onMouseEnter\n        // can fire on DOM changes, interrupting keyboard navigation\n        onMouseMove: callAllEventHandlers(onMouseMove, function () {\n          if (index === _this.getState().highlightedIndex) {\n            return;\n          }\n\n          _this.setHighlightedIndex(index, {\n            type: itemMouseEnter\n          }); // We never want to manually scroll when changing state based\n          // on `onMouseMove` because we will be moving the element out\n          // from under the user which is currently scrolling/moving the\n          // cursor\n\n\n          _this.avoidScrolling = true;\n\n          _this.internalSetTimeout(function () {\n            return _this.avoidScrolling = false;\n          }, 250);\n        }),\n        onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n          // This prevents the activeElement from being changed\n          // to the item so it can remain with the current activeElement\n          // which is a more common use case.\n          event.preventDefault();\n        })\n      }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n        _this.selectItemAtIndex(index, {\n          type: clickItem\n        });\n      }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n      // of the activeElement if clicking on disabled items\n\n      var eventHandlers = rest.disabled ? {\n        onMouseDown: enabledEventHandlers.onMouseDown\n      } : enabledEventHandlers;\n      return _extends({\n        id: _this.getItemId(index),\n        role: 'option',\n        'aria-selected': _this.getState().highlightedIndex === index\n      }, eventHandlers, {}, rest);\n    };\n\n    _this.clearItems = function () {\n      _this.items = [];\n    };\n\n    _this.reset = function (otherStateToSet, cb) {\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(function (_ref8) {\n        var selectedItem = _ref8.selectedItem;\n        return _extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          inputValue: _this.props.itemToString(selectedItem)\n        }, otherStateToSet);\n      }, cb);\n    };\n\n    _this.toggleMenu = function (otherStateToSet, cb) {\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(function (_ref9) {\n        var isOpen = _ref9.isOpen;\n        return _extends({\n          isOpen: !isOpen\n        }, isOpen && {\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        }, {}, otherStateToSet);\n      }, function () {\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen,\n            highlightedIndex = _this$getState5.highlightedIndex;\n\n        if (isOpen) {\n          if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n            _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n          }\n        }\n\n        cbToCb(cb)();\n      });\n    };\n\n    _this.openMenu = function (cb) {\n      _this.internalSetState({\n        isOpen: true\n      }, cb);\n    };\n\n    _this.closeMenu = function (cb) {\n      _this.internalSetState({\n        isOpen: false\n      }, cb);\n    };\n\n    _this.updateStatus = debounce(function () {\n      var state = _this.getState();\n\n      var item = _this.items[state.highlightedIndex];\n\n      var resultCount = _this.getItemCount();\n\n      var status = _this.props.getA11yStatusMessage(_extends({\n        itemToString: _this.props.itemToString,\n        previousResultCount: _this.previousResultCount,\n        resultCount: resultCount,\n        highlightedItem: item\n      }, state));\n\n      _this.previousResultCount = resultCount;\n      setStatus(status, _this.props.environment.document);\n    }, 200);\n\n    // fancy destructuring + defaults + aliases\n    // this basically says each value of state should either be set to\n    // the initial value or the default value if the initial value is not provided\n    var _this$props = _this.props,\n        defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n        _this$props$initialHi = _this$props.initialHighlightedIndex,\n        _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n        defaultIsOpen = _this$props.defaultIsOpen,\n        _this$props$initialIs = _this$props.initialIsOpen,\n        _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n        _this$props$initialIn = _this$props.initialInputValue,\n        _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n        _this$props$initialSe = _this$props.initialSelectedItem,\n        _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n    var _state = _this.getState({\n      highlightedIndex: _highlightedIndex,\n      isOpen: _isOpen,\n      inputValue: _inputValue,\n      selectedItem: _selectedItem\n    });\n\n    if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n      _state.inputValue = _this.props.itemToString(_state.selectedItem);\n    }\n\n    _this.state = _state;\n    return _this;\n  }\n\n  var _proto = Downshift.prototype;\n\n  /**\n   * Clear all running timeouts\n   */\n  _proto.internalClearTimeouts = function internalClearTimeouts() {\n    this.timeoutIds.forEach(function (id) {\n      clearTimeout(id);\n    });\n    this.timeoutIds = [];\n  }\n  /**\n   * Gets the state based on internal state or props\n   * If a state value is passed via props, then that\n   * is the value given, otherwise it's retrieved from\n   * stateToMerge\n   *\n   * This will perform a shallow merge of the given state object\n   * with the state coming from props\n   * (for the controlled component scenario)\n   * This is used in state updater functions so they're referencing\n   * the right state regardless of where it comes from.\n   *\n   * @param {Object} stateToMerge defaults to this.state\n   * @return {Object} the state\n   */\n  ;\n\n  _proto.getState = function getState(stateToMerge) {\n    var _this4 = this;\n\n    if (stateToMerge === void 0) {\n      stateToMerge = this.state;\n    }\n\n    return Object.keys(stateToMerge).reduce(function (state, key) {\n      state[key] = _this4.isControlledProp(key) ? _this4.props[key] : stateToMerge[key];\n      return state;\n    }, {});\n  }\n  /**\n   * This determines whether a prop is a \"controlled prop\" meaning it is\n   * state which is controlled by the outside of this component rather\n   * than within this component.\n   * @param {String} key the key to check\n   * @return {Boolean} whether it is a controlled controlled prop\n   */\n  ;\n\n  _proto.isControlledProp = function isControlledProp(key) {\n    return this.props[key] !== undefined;\n  };\n\n  _proto.getItemCount = function getItemCount() {\n    // things read better this way. They're in priority order:\n    // 1. `this.itemCount`\n    // 2. `this.props.itemCount`\n    // 3. `this.items.length`\n    var itemCount = this.items.length;\n\n    if (this.itemCount != null) {\n      itemCount = this.itemCount;\n    } else if (this.props.itemCount !== undefined) {\n      itemCount = this.props.itemCount;\n    }\n\n    return itemCount;\n  };\n\n  _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n    return this.props.environment.document.getElementById(this.getItemId(index));\n  };\n\n  _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n    /* istanbul ignore else (react-native) */\n    {\n      var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n      this.props.scrollIntoView(node, this._menuNode);\n    }\n  };\n\n  _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n    var itemCount = this.getItemCount();\n\n    if (itemCount > 0) {\n      var nextHighlightedIndex = getNextWrappingIndex(amount, this.getState().highlightedIndex, itemCount);\n      this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n    }\n  };\n\n  _proto.highlightFirstOrLastIndex = function highlightFirstOrLastIndex(event, first, otherStateToSet) {\n    var itemsLastIndex = this.getItemCount() - 1;\n\n    if (itemsLastIndex < 0 || !this.getState().isOpen) {\n      return;\n    }\n\n    event.preventDefault();\n    this.setHighlightedIndex(first ? 0 : itemsLastIndex, otherStateToSet);\n  };\n\n  _proto.getStateAndHelpers = function getStateAndHelpers() {\n    var _this$getState6 = this.getState(),\n        highlightedIndex = _this$getState6.highlightedIndex,\n        inputValue = _this$getState6.inputValue,\n        selectedItem = _this$getState6.selectedItem,\n        isOpen = _this$getState6.isOpen;\n\n    var itemToString = this.props.itemToString;\n    var id = this.id;\n    var getRootProps = this.getRootProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getMenuProps = this.getMenuProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n    return {\n      // prop getters\n      getRootProps: getRootProps,\n      getToggleButtonProps: getToggleButtonProps,\n      getLabelProps: getLabelProps,\n      getMenuProps: getMenuProps,\n      getInputProps: getInputProps,\n      getItemProps: getItemProps,\n      // actions\n      reset: reset,\n      openMenu: openMenu,\n      closeMenu: closeMenu,\n      toggleMenu: toggleMenu,\n      selectItem: selectItem,\n      selectItemAtIndex: selectItemAtIndex,\n      selectHighlightedItem: selectHighlightedItem,\n      setHighlightedIndex: setHighlightedIndex,\n      clearSelection: clearSelection,\n      clearItems: clearItems,\n      setItemCount: setItemCount,\n      unsetItemCount: unsetItemCount,\n      setState: setState,\n      // props\n      itemToString: itemToString,\n      // derived\n      id: id,\n      // state\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      selectedItem: selectedItem\n    };\n  } //////////////////////////// ROOT\n  ;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this5 = this;\n\n    /* istanbul ignore if (react-native) */\n    if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n      validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n    }\n    /* istanbul ignore if (react-native) */\n\n\n    {\n      var targetWithinDownshift = function (target, checkActiveElement) {\n        if (checkActiveElement === void 0) {\n          checkActiveElement = true;\n        }\n\n        var document = _this5.props.environment.document;\n        return [_this5._rootNode, _this5._menuNode].some(function (contextNode) {\n          return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n        });\n      }; // this.isMouseDown helps us track whether the mouse is currently held down.\n      // This is useful when the user clicks on an item in the list, but holds the mouse\n      // down long enough for the list to disappear (because the blur event fires on the input)\n      // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n      // trigger hiding the menu.\n\n\n      var onMouseDown = function () {\n        _this5.isMouseDown = true;\n      };\n\n      var onMouseUp = function (event) {\n        _this5.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n        // then we don't want to reset downshift\n\n        var contextWithinDownshift = targetWithinDownshift(event.target);\n\n        if (!contextWithinDownshift && _this5.getState().isOpen) {\n          _this5.reset({\n            type: mouseUp\n          }, function () {\n            return _this5.props.onOuterClick(_this5.getStateAndHelpers());\n          });\n        }\n      }; // Touching an element in iOS gives focus and hover states, but touching out of\n      // the element will remove hover, and persist the focus state, resulting in the\n      // blur event not being triggered.\n      // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n      // If the user taps outside of Downshift, the component should be reset,\n      // but not if the user is swiping\n\n\n      var onTouchStart = function () {\n        _this5.isTouchMove = false;\n      };\n\n      var onTouchMove = function () {\n        _this5.isTouchMove = true;\n      };\n\n      var onTouchEnd = function (event) {\n        var contextWithinDownshift = targetWithinDownshift(event.target, false);\n\n        if (!_this5.isTouchMove && !contextWithinDownshift && _this5.getState().isOpen) {\n          _this5.reset({\n            type: touchEnd\n          }, function () {\n            return _this5.props.onOuterClick(_this5.getStateAndHelpers());\n          });\n        }\n      };\n\n      var environment = this.props.environment;\n      environment.addEventListener('mousedown', onMouseDown);\n      environment.addEventListener('mouseup', onMouseUp);\n      environment.addEventListener('touchstart', onTouchStart);\n      environment.addEventListener('touchmove', onTouchMove);\n      environment.addEventListener('touchend', onTouchEnd);\n\n      this.cleanup = function () {\n        _this5.internalClearTimeouts();\n\n        _this5.updateStatus.cancel();\n\n        environment.removeEventListener('mousedown', onMouseDown);\n        environment.removeEventListener('mouseup', onMouseUp);\n        environment.removeEventListener('touchstart', onTouchStart);\n        environment.removeEventListener('touchmove', onTouchMove);\n        environment.removeEventListener('touchend', onTouchEnd);\n      };\n    }\n  };\n\n  _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n    var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n        currentHighlightedIndex = _ref10.highlightedIndex;\n\n    var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n        prevHighlightedIndex = _ref11.highlightedIndex;\n\n    var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n    return scrollWhenOpen || currentHighlightedIndex !== prevHighlightedIndex;\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (process.env.NODE_ENV !== 'production') {\n      validateControlledUnchanged(prevProps, this.props);\n      /* istanbul ignore if (react-native) */\n\n      if ( this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n    }\n\n    if (this.isControlledProp('selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n      this.internalSetState({\n        type: controlledPropUpdatedSelectedItem,\n        inputValue: this.props.itemToString(this.props.selectedItem)\n      });\n    }\n\n    if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n      this.scrollHighlightedItemIntoView();\n    }\n    /* istanbul ignore else (react-native) */\n\n\n    this.updateStatus();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.cleanup(); // avoids memory leak\n  };\n\n  _proto.render = function render() {\n    var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n    // we clear this out each render and it will be populated again as\n    // getItemProps is called.\n\n    this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n    // this render. If they do then we don't need to do anything,\n    // if they don't then we need to clone the element they return and\n    // apply the props for them.\n\n    this.getRootProps.called = false;\n    this.getRootProps.refKey = undefined;\n    this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n    this.getMenuProps.called = false;\n    this.getMenuProps.refKey = undefined;\n    this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n    this.getLabelProps.called = false; // and something similar for getInputProps\n\n    this.getInputProps.called = false;\n    var element = unwrapArray(children(this.getStateAndHelpers()));\n\n    if (!element) {\n      return null;\n    }\n\n    if (this.getRootProps.called || this.props.suppressRefError) {\n      if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n        validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n      }\n\n      return element;\n    } else if (isDOMElement(element)) {\n      // they didn't apply the root props, but we can clone\n      // this and apply the props ourselves\n      return cloneElement(element, this.getRootProps(getElementProps(element)));\n    }\n    /* istanbul ignore else */\n\n\n    if (process.env.NODE_ENV !== 'production') {\n      // they didn't apply the root props, but they need to\n      // otherwise we can't query around the autocomplete\n      throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n    }\n    /* istanbul ignore next */\n\n\n    return undefined;\n  };\n\n  return Downshift;\n}(Component);\n\nDownshift.defaultProps = {\n  defaultHighlightedIndex: null,\n  defaultIsOpen: false,\n  getA11yStatusMessage: getA11yStatusMessage,\n  itemToString: function itemToString(i) {\n    if (i == null) {\n      return '';\n    }\n\n    if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n      // eslint-disable-next-line no-console\n      console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n    }\n\n    return String(i);\n  },\n  onStateChange: noop,\n  onInputValueChange: noop,\n  onUserAction: noop,\n  onChange: noop,\n  onSelect: noop,\n  onOuterClick: noop,\n  selectedItemChanged: function selectedItemChanged(prevItem, item) {\n    return prevItem !== item;\n  },\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window,\n  stateReducer: function stateReducer(state, stateToSet) {\n    return stateToSet;\n  },\n  suppressRefError: false,\n  scrollIntoView: scrollIntoView\n};\nDownshift.stateChangeTypes = stateChangeTypes;\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nfunction validateControlledUnchanged(prevProps, nextProps) {\n  var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n  ['selectedItem', 'isOpen', 'inputValue', 'highlightedIndex'].forEach(function (propKey) {\n    if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n    } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n    }\n  });\n}\n\nfunction getElementIds(generateDefaultId, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      id = _ref.id,\n      labelId = _ref.labelId,\n      menuId = _ref.menuId,\n      getItemId = _ref.getItemId,\n      toggleButtonId = _ref.toggleButtonId;\n\n  var uniqueId = id === undefined ? \"downshift-\" + generateDefaultId() : id;\n  return {\n    labelId: labelId || uniqueId + \"-label\",\n    menuId: menuId || uniqueId + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return uniqueId + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || uniqueId + \"-toggle-button\"\n  };\n}\n\nfunction getNextWrappingIndex$1(moveAmount, baseIndex, itemsLength, circular) {\n  if (baseIndex === -1) {\n    return moveAmount > 0 ? 0 : itemsLength - 1;\n  }\n\n  var nextIndex = baseIndex + moveAmount;\n\n  if (nextIndex < 0) {\n    return circular ? itemsLength - 1 : 0;\n  }\n\n  if (nextIndex >= itemsLength) {\n    return circular ? 0 : itemsLength - 1;\n  }\n\n  return nextIndex;\n}\n\nfunction getItemIndexByCharacterKey(keysSoFar, highlightedIndex, items, itemToStringParam) {\n  var newHighlightedIndex = -1;\n  var itemStrings = items.map(function (item) {\n    return itemToStringParam(item).toLowerCase();\n  });\n  var startPosition = highlightedIndex + 1;\n  newHighlightedIndex = itemStrings.slice(startPosition).findIndex(function (itemString) {\n    return itemString.startsWith(keysSoFar);\n  });\n\n  if (newHighlightedIndex > -1) {\n    return newHighlightedIndex + startPosition;\n  } else {\n    return itemStrings.slice(0, startPosition).findIndex(function (itemString) {\n      return itemString.startsWith(keysSoFar);\n    });\n  }\n}\n\nfunction getState(state, props) {\n  return Object.keys(state).reduce(function (prevState, key) {\n    // eslint-disable-next-line no-param-reassign\n    prevState[key] = key in props ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n\nfunction getItemIndex(index, item, items) {\n  if (index !== undefined) {\n    return index;\n  }\n\n  if (items.length === 0) {\n    return -1;\n  }\n\n  return items.indexOf(item);\n}\n\nfunction itemToString(item) {\n  return item ? String(item) : '';\n}\n\nfunction getPropTypesValidator(caller, propTypes) {\n  // istanbul ignore next\n  return function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    Object.entries(propTypes).forEach(function (_ref2) {\n      var key = _ref2[0];\n      PropTypes.checkPropTypes(propTypes, options, key, caller.name);\n    });\n  };\n}\n\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\n\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\n\nfunction invokeOnChangeHandler(propKey, props, state, changes) {\n  var handler = \"on\" + capitalizeString(propKey) + \"Change\";\n\n  if (props[handler] && changes[propKey] !== undefined && changes[propKey] !== state[propKey]) {\n    props[handler](changes);\n  }\n}\n\nfunction callOnChangeProps(props, state, changes) {\n  Object.keys(state).forEach(function (stateKey) {\n    invokeOnChangeHandler(stateKey, props, state, changes);\n  });\n\n  if (props.onStateChange && changes !== undefined) {\n    props.onStateChange(changes);\n  }\n}\n\nfunction useEnhancedReducer(reducer, initialState, props) {\n  var enhancedReducer = useCallback(function (state, action) {\n    state = getState(state, action.props);\n    var stateReducer = action.props.stateReducer;\n    var changes = reducer(state, action);\n    var newState = stateReducer(state, _extends({}, action, {\n      changes: changes\n    }));\n    callOnChangeProps(action.props, state, newState);\n    return newState;\n  }, [reducer]);\n\n  var _useReducer = useReducer(enhancedReducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  return [getState(state, props), dispatch];\n}\n\nvar lastId = 0; // istanbul ignore next\n\nvar genId = function () {\n  return ++lastId;\n};\n/**\n * Autogenerate IDs to facilitate WAI-ARIA and server rendering.\n * Taken from @reach/auto-id\n * @see https://github.com/reach/reach-ui/blob/6e9dbcf716d5c9a3420e062e5bac1ac4671d01cb/packages/auto-id/src/index.js\n */\n// istanbul ignore next\n\n\nfunction useId() {\n  var _useState = useState(null),\n      id = _useState[0],\n      setId = _useState[1];\n\n  useEffect(function () {\n    return setId(genId());\n  }, []);\n  return id;\n}\n\nvar defaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null\n};\n\nfunction getA11yStatusMessage$1(_ref) {\n  var isOpen = _ref.isOpen,\n      items = _ref.items;\n\n  if (!items) {\n    return '';\n  }\n\n  var resultCount = items.length;\n\n  if (isOpen) {\n    if (resultCount === 0) {\n      return 'No results are available';\n    }\n\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n\nfunction getA11ySelectionMessage(_ref2) {\n  var selectedItem = _ref2.selectedItem,\n      itemToString = _ref2.itemToString;\n  return itemToString(selectedItem) + \" has been selected.\";\n}\n\nfunction getHighlightedIndexOnOpen(props, state, offset) {\n  var items = props.items,\n      initialHighlightedIndex = props.initialHighlightedIndex,\n      defaultHighlightedIndex = props.defaultHighlightedIndex;\n  var selectedItem = state.selectedItem,\n      highlightedIndex = state.highlightedIndex; // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n\n  if (initialHighlightedIndex !== undefined && highlightedIndex > -1) {\n    return initialHighlightedIndex;\n  }\n\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n\n  if (selectedItem) {\n    if (offset === 0) {\n      return items.indexOf(selectedItem);\n    }\n\n    return getNextWrappingIndex$1(offset, items.indexOf(selectedItem), items.length, false);\n  }\n\n  if (offset === 0) {\n    return -1;\n  }\n\n  return offset < 0 ? items.length - 1 : 0;\n}\n\nfunction getDefaultValue(props, propKey) {\n  var defaultPropKey = \"default\" + capitalizeString(propKey);\n\n  if (defaultPropKey in props) {\n    return props[defaultPropKey];\n  }\n\n  return defaultStateValues[propKey];\n}\n\nfunction getInitialValue(props, propKey) {\n  if (propKey in props) {\n    return props[propKey];\n  }\n\n  var initialPropKey = \"initial\" + capitalizeString(propKey);\n\n  if (initialPropKey in props) {\n    return props[initialPropKey];\n  }\n\n  return getDefaultValue(props, propKey);\n}\n\nfunction getInitialState(props) {\n  var selectedItem = getInitialValue(props, 'selectedItem');\n  var highlightedIndex = getInitialValue(props, 'highlightedIndex');\n  var isOpen = getInitialValue(props, 'isOpen');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem ? props.items.indexOf(selectedItem) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    keysSoFar: ''\n  };\n}\n\nvar propTypes = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n\nvar MenuKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_down__' : 0;\nvar MenuKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_up__' : 1;\nvar MenuKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_escape__' : 2;\nvar MenuKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_home__' : 3;\nvar MenuKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_end__' : 4;\nvar MenuKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_enter__' : 5;\nvar MenuKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_character__' : 6;\nvar MenuBlur = process.env.NODE_ENV !== \"production\" ? '__menu_blur__' : 7;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 8;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 9;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 10;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 11;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 12;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 13;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 14;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 15;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 16;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 17;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 18;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 19;\nvar FunctionClearKeysSoFar = process.env.NODE_ENV !== \"production\" ? '__function_clear_keys_so_far__' : 20;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 21;\n\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  MenuKeyDownArrowDown: MenuKeyDownArrowDown,\n  MenuKeyDownArrowUp: MenuKeyDownArrowUp,\n  MenuKeyDownEscape: MenuKeyDownEscape,\n  MenuKeyDownHome: MenuKeyDownHome,\n  MenuKeyDownEnd: MenuKeyDownEnd,\n  MenuKeyDownEnter: MenuKeyDownEnter,\n  MenuKeyDownCharacter: MenuKeyDownCharacter,\n  MenuBlur: MenuBlur,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonClick: ToggleButtonClick,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionClearKeysSoFar: FunctionClearKeysSoFar,\n  FunctionReset: FunctionReset\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftSelectReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemMouseMove:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n\n    case MenuBlur:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex$1(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, props.circularNavigation)\n      };\n      break;\n\n    case MenuKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex$1(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, props.circularNavigation)\n      };\n      break;\n\n    case MenuKeyDownHome:\n      changes = {\n        highlightedIndex: 0\n      };\n      break;\n\n    case MenuKeyDownEnd:\n      changes = {\n        highlightedIndex: props.items.length - 1\n      };\n      break;\n\n    case MenuKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuKeyDownEnter:\n      changes = _extends({\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex')\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n\n    case MenuKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var keysSoFar = \"\" + state.keysSoFar + lowercasedKey;\n        var highlightedIndex = getItemIndexByCharacterKey(keysSoFar, state.highlightedIndex, props.items, props.itemToString);\n        changes = _extends({\n          keysSoFar: keysSoFar\n        }, highlightedIndex >= 0 && {\n          highlightedIndex: highlightedIndex\n        });\n      }\n      break;\n\n    case MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonKeyDownCharacter:\n      {\n        var _lowercasedKey = action.key;\n\n        var _keysSoFar = \"\" + state.keysSoFar + _lowercasedKey;\n\n        var itemIndex = getItemIndexByCharacterKey(_keysSoFar, state.selectedItem ? props.items.indexOf(state.selectedItem) : -1, props.items, props.itemToString);\n        changes = _extends({\n          keysSoFar: _keysSoFar\n        }, itemIndex >= 0 && {\n          selectedItem: props.items[itemIndex]\n        });\n      }\n      break;\n\n    case ToggleButtonKeyDownArrowDown:\n      {\n        changes = {\n          isOpen: true,\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, 1)\n        };\n        break;\n      }\n\n    case ToggleButtonKeyDownArrowUp:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, -1)\n      };\n      break;\n\n    case ToggleButtonClick:\n    case FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n\n    case FunctionClearKeysSoFar:\n      changes = {\n        keysSoFar: ''\n      };\n      break;\n\n    case FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, {}, changes);\n}\n/* eslint-enable complexity */\n\nvar validatePropTypes = getPropTypesValidator(useSelect, propTypes);\nvar defaultProps = {\n  itemToString: itemToString,\n  stateReducer: function stateReducer(s, a) {\n    return a.changes;\n  },\n  getA11yStatusMessage: getA11yStatusMessage$1,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window\n};\nuseSelect.stateChangeTypes = stateChangeTypes$1;\n\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  validatePropTypes(userProps); // Props defaults and destructuring.\n\n  var props = _extends({}, defaultProps, {}, userProps);\n\n  var items = props.items,\n      itemToString = props.itemToString,\n      getA11yStatusMessage = props.getA11yStatusMessage,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment; // Initial state depending on controlled props.\n\n  var initialState = getInitialState(props); // Reducer init.\n\n  var _useEnhancedReducer = useEnhancedReducer(downshiftSelectReducer, initialState, props),\n      _useEnhancedReducer$ = _useEnhancedReducer[0],\n      isOpen = _useEnhancedReducer$.isOpen,\n      highlightedIndex = _useEnhancedReducer$.highlightedIndex,\n      selectedItem = _useEnhancedReducer$.selectedItem,\n      keysSoFar = _useEnhancedReducer$.keysSoFar,\n      dispatchWithoutProps = _useEnhancedReducer[1];\n\n  var dispatch = function (action) {\n    return dispatchWithoutProps(_extends({\n      props: props\n    }, action));\n  }; // IDs generation.\n\n\n  var _getElementIds = getElementIds(useId, props),\n      labelId = _getElementIds.labelId,\n      getItemId = _getElementIds.getItemId,\n      menuId = _getElementIds.menuId,\n      toggleButtonId = _getElementIds.toggleButtonId;\n  /* Refs */\n\n\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef();\n  itemRefs.current = [];\n  var isInitialMount = useRef(true);\n  var shouldScroll = useRef(true);\n  var clearTimeout = useRef(null);\n  /* Effects */\n\n  /* Sets a11y status message on changes in isOpen. */\n\n  useEffect(function () {\n    if (isInitialMount.current) {\n      return;\n    }\n\n    setStatus(getA11yStatusMessage({\n      isOpen: isOpen,\n      items: items,\n      selectedItem: selectedItem,\n      itemToString: itemToString\n    }), environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen]);\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMount.current) {\n      return;\n    }\n\n    setStatus(getA11ySelectionMessage({\n      isOpen: isOpen,\n      items: items,\n      selectedItem: selectedItem,\n      itemToString: itemToString\n    }), environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]);\n  /* Sets cleanup for the keysSoFar after 500ms. */\n\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    if (isInitialMount.current) {\n      clearTimeout.current = debounce(function () {\n        dispatch({\n          type: FunctionClearKeysSoFar\n        });\n      }, 500);\n    }\n\n    if (!keysSoFar) {\n      return;\n    }\n\n    clearTimeout.current(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [keysSoFar]);\n  /* Controls the focus on the menu or the toggle button. */\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMount.current) {\n      // Unless it was initialised as open.\n      if (initialIsOpen || defaultIsOpen || isOpen) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus menu on open.\n    // istanbul ignore next\n\n\n    if (isOpen) {\n      menuRef.current.focus(); // Focus toggleButton on close.\n    } else if (environment.document.activeElement === menuRef.current) {\n      toggleButtonRef.current.focus();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]);\n  /* Scroll on highlighted item if change comes from keyboard. */\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !itemRefs.current.length) {\n      return;\n    }\n\n    if (shouldScroll.current === false) {\n      shouldScroll.current = true;\n    } else {\n      scrollIntoView(itemRefs.current[highlightedIndex], menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]);\n  /* Make initial ref false. */\n\n  useEffect(function () {\n    isInitialMount.current = false;\n  }, []);\n  /* Event handler functions */\n\n  var menuKeyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownArrowDown,\n        shiftKey: event.shiftKey\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownArrowUp,\n        shiftKey: event.shiftKey\n      });\n    },\n    Home: function Home(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownHome\n      });\n    },\n    End: function End(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownEnd\n      });\n    },\n    Escape: function Escape() {\n      dispatch({\n        type: MenuKeyDownEscape\n      });\n    },\n    Enter: function Enter(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownEnter\n      });\n    },\n    Tab: function Tab(event) {\n      // The exception that calls MenuBlur.\n      // istanbul ignore next\n      if (event.shiftKey) {\n        dispatch({\n          type: MenuBlur\n        });\n      }\n    }\n  };\n  var toggleButtonKeyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      dispatch({\n        type: ToggleButtonKeyDownArrowDown\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      dispatch({\n        type: ToggleButtonKeyDownArrowUp\n      });\n    }\n  }; // Event handlers.\n\n  var menuHandleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n\n    if (key && menuKeyDownHandlers[key]) {\n      menuKeyDownHandlers[key](event);\n    } else if (isAcceptedCharacterKey(key)) {\n      dispatch({\n        type: MenuKeyDownCharacter,\n        key: key\n      });\n    }\n  }; // Focus going back to the toggleButton is something we control (Escape, Enter, Click).\n  // We are toggleing special actions for these cases in reducer, not MenuBlur.\n  // Since Shift-Tab also lands focus on toggleButton, we will handle it as exception and call MenuBlur.\n\n\n  var menuHandleBlur = function (event) {\n    if (event.relatedTarget !== toggleButtonRef.current) {\n      dispatch({\n        type: MenuBlur\n      });\n    }\n  };\n\n  var menuHandleMouseLeave = function () {\n    dispatch({\n      type: MenuMouseLeave\n    });\n  };\n\n  var toggleButtonHandleClick = function () {\n    dispatch({\n      type: ToggleButtonClick\n    });\n  };\n\n  var toggleButtonHandleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n\n    if (key && toggleButtonKeyDownHandlers[key]) {\n      toggleButtonKeyDownHandlers[key](event);\n    } else if (isAcceptedCharacterKey(key)) {\n      dispatch({\n        type: ToggleButtonKeyDownCharacter,\n        key: key\n      });\n    }\n  };\n\n  var itemHandleMouseMove = function (index) {\n    if (index === highlightedIndex) {\n      return;\n    }\n\n    shouldScroll.current = false;\n    dispatch({\n      type: ItemMouseMove,\n      index: index\n    });\n  };\n\n  var itemHandleClick = function (index) {\n    dispatch({\n      type: ItemClick,\n      index: index\n    });\n  }; // returns\n\n\n  return {\n    // prop getters.\n    getToggleButtonProps: function getToggleButtonProps(_temp2) {\n      var _extends3;\n\n      var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          onClick = _ref2.onClick,\n          onKeyDown = _ref2.onKeyDown,\n          _ref2$refKey = _ref2.refKey,\n          refKey = _ref2$refKey === void 0 ? 'ref' : _ref2$refKey,\n          ref = _ref2.ref,\n          rest = _objectWithoutPropertiesLoose(_ref2, [\"onClick\", \"onKeyDown\", \"refKey\", \"ref\"]);\n\n      var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n        toggleButtonRef.current = toggleButtonNode;\n      }), _extends3.id = toggleButtonId, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-expanded'] = isOpen, _extends3['aria-labelledby'] = labelId + \" \" + toggleButtonId, _extends3), rest);\n\n      if (!rest.disabled) {\n        toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n        toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n      }\n\n      return toggleProps;\n    },\n    getLabelProps: function getLabelProps(labelProps) {\n      return _extends({\n        id: labelId,\n        htmlFor: toggleButtonId\n      }, labelProps);\n    },\n    getMenuProps: function getMenuProps(_temp) {\n      var _extends2;\n\n      var _ref = _temp === void 0 ? {} : _temp,\n          onKeyDown = _ref.onKeyDown,\n          onBlur = _ref.onBlur,\n          onMouseLeave = _ref.onMouseLeave,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          ref = _ref.ref,\n          rest = _objectWithoutPropertiesLoose(_ref, [\"onKeyDown\", \"onBlur\", \"onMouseLeave\", \"refKey\", \"ref\"]);\n\n      return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n        menuRef.current = menuNode;\n      }), _extends2.id = menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = labelId, _extends2.tabIndex = -1, _extends2), highlightedIndex > -1 && {\n        'aria-activedescendant': getItemId(highlightedIndex)\n      }, {\n        onKeyDown: callAllEventHandlers(onKeyDown, menuHandleKeyDown),\n        onBlur: callAllEventHandlers(onBlur, menuHandleBlur),\n        onMouseLeave: callAllEventHandlers(onMouseLeave, menuHandleMouseLeave)\n      }, rest);\n    },\n    getItemProps: function getItemProps(_temp3) {\n      var _extends4;\n\n      var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          item = _ref3.item,\n          index = _ref3.index,\n          _ref3$refKey = _ref3.refKey,\n          refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n          ref = _ref3.ref,\n          onMouseMove = _ref3.onMouseMove,\n          onClick = _ref3.onClick,\n          rest = _objectWithoutPropertiesLoose(_ref3, [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onClick\"]);\n\n      var itemIndex = getItemIndex(index, item, items);\n\n      if (itemIndex < 0) {\n        throw new Error('Pass either item or item index in getItemProps!');\n      }\n\n      return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n        if (itemNode) {\n          itemRefs.current.push(itemNode);\n        }\n      }), _extends4.role = 'option', _extends4), itemIndex === highlightedIndex && {\n        'aria-selected': true\n      }, {\n        id: getItemId(itemIndex),\n        onMouseMove: callAllEventHandlers(onMouseMove, function () {\n          return itemHandleMouseMove(itemIndex);\n        }),\n        onClick: callAllEventHandlers(onClick, function () {\n          return itemHandleClick(itemIndex);\n        })\n      }, rest);\n    },\n    // actions.\n    toggleMenu: function toggleMenu() {\n      dispatch({\n        type: FunctionToggleMenu\n      });\n    },\n    openMenu: function openMenu() {\n      dispatch({\n        type: FunctionOpenMenu\n      });\n    },\n    closeMenu: function closeMenu() {\n      dispatch({\n        type: FunctionCloseMenu\n      });\n    },\n    setHighlightedIndex: function setHighlightedIndex(newHighlightedIndex) {\n      dispatch({\n        type: FunctionSetHighlightedIndex,\n        highlightedIndex: newHighlightedIndex\n      });\n    },\n    selectItem: function selectItem(newSelectedItem) {\n      dispatch({\n        type: FunctionSelectItem,\n        selectedItem: newSelectedItem\n      });\n    },\n    reset: function reset() {\n      dispatch({\n        type: FunctionReset\n      });\n    },\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem\n  };\n}\n\nexport default Downshift;\nexport { resetIdCounter, useSelect };\n"]},"metadata":{},"sourceType":"module"}