{"ast":null,"code":"'use strict';\n\nvar utils = require('./utils');\n\nfunction makeResponse(result, config) {\n  return {\n    status: result[0],\n    data: utils.isSimpleObject(result[1]) ? JSON.parse(JSON.stringify(result[1])) : result[1],\n    headers: result[2],\n    config: config\n  };\n}\n\nfunction handleRequest(mockAdapter, resolve, reject, config) {\n  var url = config.url;\n\n  if (config.baseURL && config.url.substr(0, config.baseURL.length) === config.baseURL) {\n    url = config.url.slice(config.baseURL ? config.baseURL.length : 0);\n  }\n\n  delete config.adapter;\n  mockAdapter.history[config.method].push(config);\n  var handler = utils.findHandler(mockAdapter.handlers, config.method, url, config.data, config.params, config.headers, config.baseURL);\n\n  if (handler) {\n    if (handler.length === 7) {\n      utils.purgeIfReplyOnce(mockAdapter, handler);\n    }\n\n    if (handler.length === 2) {\n      // passThrough handler\n      mockAdapter.originalAdapter(config).then(resolve, reject);\n    } else if (typeof handler[3] !== 'function') {\n      utils.settle(resolve, reject, makeResponse(handler.slice(3), config), mockAdapter.delayResponse);\n    } else {\n      var result = handler[3](config); // TODO throw a sane exception when return value is incorrect\n\n      if (typeof result.then !== 'function') {\n        utils.settle(resolve, reject, makeResponse(result, config), mockAdapter.delayResponse);\n      } else {\n        result.then(function (result) {\n          if (result.config && result.status) {\n            utils.settle(resolve, reject, makeResponse([result.status, result.data, result.headers], result.config), 0);\n          } else {\n            utils.settle(resolve, reject, makeResponse(result, config), mockAdapter.delayResponse);\n          }\n        }, function (error) {\n          if (mockAdapter.delayResponse > 0) {\n            setTimeout(function () {\n              reject(error);\n            }, mockAdapter.delayResponse);\n          } else {\n            reject(error);\n          }\n        });\n      }\n    }\n  } else {\n    // handler not found\n    utils.settle(resolve, reject, {\n      status: 404,\n      config: config\n    }, mockAdapter.delayResponse);\n  }\n}\n\nmodule.exports = handleRequest;","map":{"version":3,"sources":["/Applications/MAMP/htdocs/project/client/node_modules/axios-mock-adapter/src/handle_request.js"],"names":["utils","require","makeResponse","result","config","status","data","isSimpleObject","JSON","parse","stringify","headers","handleRequest","mockAdapter","resolve","reject","url","baseURL","substr","length","slice","adapter","history","method","push","handler","findHandler","handlers","params","purgeIfReplyOnce","originalAdapter","then","settle","delayResponse","error","setTimeout","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar utils = require('./utils');\n\nfunction makeResponse(result, config) {\n  return {\n    status: result[0],\n    data: utils.isSimpleObject(result[1]) ? JSON.parse(JSON.stringify(result[1])) : result[1],\n    headers: result[2],\n    config: config\n  };\n}\n\nfunction handleRequest(mockAdapter, resolve, reject, config) {\n  var url = config.url;\n  if (config.baseURL && config.url.substr(0, config.baseURL.length) === config.baseURL) {\n    url = config.url.slice(config.baseURL ? config.baseURL.length : 0);\n  }\n\n  delete config.adapter;\n  mockAdapter.history[config.method].push(config);\n\n  var handler = utils.findHandler(\n    mockAdapter.handlers,\n    config.method,\n    url,\n    config.data,\n    config.params,\n    config.headers,\n    config.baseURL\n  );\n\n  if (handler) {\n    if (handler.length === 7) {\n      utils.purgeIfReplyOnce(mockAdapter, handler);\n    }\n\n    if (handler.length === 2) {\n      // passThrough handler\n      mockAdapter.originalAdapter(config).then(resolve, reject);\n    } else if (typeof handler[3] !== 'function') {\n      utils.settle(\n        resolve,\n        reject,\n        makeResponse(handler.slice(3), config),\n        mockAdapter.delayResponse\n      );\n    } else {\n      var result = handler[3](config);\n      // TODO throw a sane exception when return value is incorrect\n      if (typeof result.then !== 'function') {\n        utils.settle(resolve, reject, makeResponse(result, config), mockAdapter.delayResponse);\n      } else {\n        result.then(\n          function(result) {\n            if (result.config && result.status) {\n              utils.settle(resolve, reject, makeResponse([result.status, result.data, result.headers], result.config), 0);\n            } else {\n              utils.settle(resolve, reject, makeResponse(result, config), mockAdapter.delayResponse);\n            }\n          },\n          function(error) {\n            if (mockAdapter.delayResponse > 0) {\n              setTimeout(function() {\n                reject(error);\n              }, mockAdapter.delayResponse);\n            } else {\n              reject(error);\n            }\n          }\n        );\n      }\n    }\n  } else {\n    // handler not found\n    utils.settle(\n      resolve,\n      reject,\n      {\n        status: 404,\n        config: config\n      },\n      mockAdapter.delayResponse\n    );\n  }\n}\n\nmodule.exports = handleRequest;\n"]},"metadata":{},"sourceType":"script"}